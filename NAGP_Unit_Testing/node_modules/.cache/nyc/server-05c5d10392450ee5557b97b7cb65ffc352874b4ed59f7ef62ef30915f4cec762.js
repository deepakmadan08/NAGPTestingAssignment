function cov_1nbcffmqdp(){var path="D:\\workspace\\NAGP_Unit_Testing\\server.js";var hash="858d28407ac2fd58b078fe003b808332db141c99";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"D:\\workspace\\NAGP_Unit_Testing\\server.js",statementMap:{"0":{start:{line:1,column:16},end:{line:1,column:34}},"1":{start:{line:2,column:12},end:{line:2,column:21}},"2":{start:{line:3,column:19},end:{line:3,column:41}},"3":{start:{line:4,column:13},end:{line:4,column:17}},"4":{start:{line:5,column:11},end:{line:5,column:41}},"5":{start:{line:7,column:0},end:{line:7,column:49}},"6":{start:{line:8,column:0},end:{line:8,column:27}},"7":{start:{line:11,column:0},end:{line:14,column:2}},"8":{start:{line:12,column:4},end:{line:12,column:60}},"9":{start:{line:13,column:4},end:{line:13,column:54}},"10":{start:{line:21,column:0},end:{line:43,column:3}},"11":{start:{line:22,column:4},end:{line:22,column:57}},"12":{start:{line:23,column:4},end:{line:23,column:58}},"13":{start:{line:24,column:15},end:{line:24,column:30}},"14":{start:{line:25,column:13},end:{line:25,column:26}},"15":{start:{line:26,column:4},end:{line:42,column:5}},"16":{start:{line:27,column:7},end:{line:27,column:85}},"17":{start:{line:28,column:27},end:{line:28,column:52}},"18":{start:{line:29,column:7},end:{line:29,column:34}},"19":{start:{line:30,column:8},end:{line:37,column:9}},"20":{start:{line:31,column:12},end:{line:31,column:90}},"21":{start:{line:32,column:23},end:{line:32,column:53}},"22":{start:{line:33,column:12},end:{line:33,column:41}},"23":{start:{line:36,column:12},end:{line:36,column:96}},"24":{start:{line:38,column:10},end:{line:42,column:5}},"25":{start:{line:39,column:8},end:{line:39,column:97}},"26":{start:{line:41,column:8},end:{line:41,column:99}},"27":{start:{line:50,column:0},end:{line:93,column:4}},"28":{start:{line:51,column:0},end:{line:92,column:5}},"29":{start:{line:52,column:4},end:{line:52,column:58}},"30":{start:{line:53,column:4},end:{line:53,column:68}},"31":{start:{line:54,column:15},end:{line:54,column:30}},"32":{start:{line:55,column:20},end:{line:55,column:40}},"33":{start:{line:56,column:4},end:{line:89,column:5}},"34":{start:{line:58,column:31},end:{line:58,column:66}},"35":{start:{line:59,column:28},end:{line:59,column:53}},"36":{start:{line:62,column:8},end:{line:62,column:94}},"37":{start:{line:63,column:8},end:{line:86,column:9}},"38":{start:{line:64,column:12},end:{line:64,column:65}},"39":{start:{line:65,column:12},end:{line:65,column:99}},"40":{start:{line:66,column:14},end:{line:86,column:9}},"41":{start:{line:67,column:12},end:{line:67,column:66}},"42":{start:{line:68,column:12},end:{line:68,column:96}},"43":{start:{line:69,column:14},end:{line:86,column:9}},"44":{start:{line:70,column:12},end:{line:70,column:93}},"45":{start:{line:71,column:12},end:{line:71,column:139}},"46":{start:{line:72,column:12},end:{line:72,column:46}},"47":{start:{line:73,column:12},end:{line:73,column:52}},"48":{start:{line:74,column:12},end:{line:74,column:116}},"49":{start:{line:75,column:12},end:{line:85,column:13}},"50":{start:{line:76,column:16},end:{line:76,column:69}},"51":{start:{line:77,column:16},end:{line:77,column:99}},"52":{start:{line:79,column:16},end:{line:79,column:66}},"53":{start:{line:80,column:27},end:{line:80,column:68}},"54":{start:{line:82,column:31},end:{line:82,column:73}},"55":{start:{line:83,column:16},end:{line:83,column:68}},"56":{start:{line:84,column:16},end:{line:84,column:103}},"57":{start:{line:88,column:8},end:{line:88,column:99}},"58":{start:{line:91,column:4},end:{line:91,column:104}},"59":{start:{line:99,column:0},end:{line:129,column:4}},"60":{start:{line:100,column:4},end:{line:100,column:58}},"61":{start:{line:101,column:4},end:{line:101,column:68}},"62":{start:{line:102,column:15},end:{line:102,column:30}},"63":{start:{line:103,column:20},end:{line:103,column:40}},"64":{start:{line:104,column:4},end:{line:128,column:5}},"65":{start:{line:106,column:32},end:{line:106,column:69}},"66":{start:{line:107,column:29},end:{line:107,column:54}},"67":{start:{line:110,column:9},end:{line:110,column:100}},"68":{start:{line:111,column:9},end:{line:125,column:10}},"69":{start:{line:112,column:12},end:{line:112,column:66}},"70":{start:{line:113,column:12},end:{line:113,column:96}},"71":{start:{line:114,column:14},end:{line:125,column:10}},"72":{start:{line:115,column:12},end:{line:115,column:90}},"73":{start:{line:116,column:12},end:{line:116,column:99}},"74":{start:{line:117,column:15},end:{line:125,column:10}},"75":{start:{line:118,column:12},end:{line:118,column:93}},"76":{start:{line:119,column:29},end:{line:119,column:68}},"77":{start:{line:120,column:12},end:{line:120,column:63}},"78":{start:{line:121,column:25},end:{line:121,column:72}},"79":{start:{line:123,column:26},end:{line:123,column:72}},"80":{start:{line:124,column:12},end:{line:124,column:99}},"81":{start:{line:127,column:8},end:{line:127,column:99}},"82":{start:{line:133,column:4},end:{line:133,column:30}},"83":{start:{line:138,column:4},end:{line:138,column:35}},"84":{start:{line:143,column:4},end:{line:143,column:38}},"85":{start:{line:148,column:4},end:{line:148,column:42}},"86":{start:{line:153,column:4},end:{line:153,column:46}},"87":{start:{line:158,column:4},end:{line:158,column:48}},"88":{start:{line:162,column:4},end:{line:162,column:51}},"89":{start:{line:166,column:4},end:{line:166,column:55}},"90":{start:{line:170,column:20},end:{line:170,column:30}},"91":{start:{line:171,column:21},end:{line:171,column:41}},"92":{start:{line:172,column:22},end:{line:172,column:44}},"93":{start:{line:173,column:4},end:{line:173,column:62}},"94":{start:{line:174,column:21},end:{line:174,column:56}},"95":{start:{line:175,column:4},end:{line:175,column:44}},"96":{start:{line:176,column:4},end:{line:176,column:49}},"97":{start:{line:177,column:4},end:{line:177,column:40}},"98":{start:{line:178,column:4},end:{line:178,column:40}},"99":{start:{line:181,column:0},end:{line:183,column:2}},"100":{start:{line:182,column:2},end:{line:182,column:66}},"101":{start:{line:185,column:0},end:{line:185,column:19}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:11,column:13},end:{line:11,column:14}},loc:{start:{line:11,column:27},end:{line:14,column:1}},line:11},"1":{name:"(anonymous_1)",decl:{start:{line:21,column:21},end:{line:21,column:22}},loc:{start:{line:21,column:41},end:{line:43,column:2}},line:21},"2":{name:"(anonymous_2)",decl:{start:{line:50,column:23},end:{line:50,column:24}},loc:{start:{line:50,column:43},end:{line:93,column:3}},line:50},"3":{name:"(anonymous_3)",decl:{start:{line:99,column:24},end:{line:99,column:25}},loc:{start:{line:99,column:44},end:{line:129,column:3}},line:99},"4":{name:"getUserByID",decl:{start:{line:132,column:9},end:{line:132,column:20}},loc:{start:{line:132,column:24},end:{line:134,column:1}},line:132},"5":{name:"addUserFund",decl:{start:{line:137,column:9},end:{line:137,column:20}},loc:{start:{line:137,column:29},end:{line:139,column:1}},line:137},"6":{name:"deductUserFund",decl:{start:{line:142,column:9},end:{line:142,column:23}},loc:{start:{line:142,column:32},end:{line:144,column:1}},line:142},"7":{name:"getCompanyByName",decl:{start:{line:147,column:9},end:{line:147,column:25}},loc:{start:{line:147,column:38},end:{line:149,column:1}},line:147},"8":{name:"getUserCompanyByID",decl:{start:{line:152,column:9},end:{line:152,column:27}},loc:{start:{line:152,column:40},end:{line:154,column:1}},line:152},"9":{name:"getFundByCompanyName",decl:{start:{line:157,column:9},end:{line:157,column:29}},loc:{start:{line:157,column:42},end:{line:159,column:1}},line:157},"10":{name:"addCompanyToUser",decl:{start:{line:161,column:9},end:{line:161,column:25}},loc:{start:{line:161,column:45},end:{line:163,column:1}},line:161},"11":{name:"deletCompanyFromUser",decl:{start:{line:165,column:9},end:{line:165,column:29}},loc:{start:{line:165,column:49},end:{line:167,column:1}},line:165},"12":{name:"checkTime",decl:{start:{line:169,column:9},end:{line:169,column:18}},loc:{start:{line:169,column:20},end:{line:179,column:1}},line:169},"13":{name:"(anonymous_13)",decl:{start:{line:181,column:17},end:{line:181,column:18}},loc:{start:{line:181,column:23},end:{line:183,column:1}},line:181}},branchMap:{"0":{loc:{start:{line:26,column:4},end:{line:42,column:5}},type:"if",locations:[{start:{line:26,column:4},end:{line:42,column:5}},{start:{line:26,column:4},end:{line:42,column:5}}],line:26},"1":{loc:{start:{line:26,column:8},end:{line:26,column:57}},type:"binary-expr",locations:[{start:{line:26,column:8},end:{line:26,column:25}},{start:{line:26,column:29},end:{line:26,column:44}},{start:{line:26,column:49},end:{line:26,column:57}}],line:26},"2":{loc:{start:{line:30,column:8},end:{line:37,column:9}},type:"if",locations:[{start:{line:30,column:8},end:{line:37,column:9}},{start:{line:30,column:8},end:{line:37,column:9}}],line:30},"3":{loc:{start:{line:38,column:10},end:{line:42,column:5}},type:"if",locations:[{start:{line:38,column:10},end:{line:42,column:5}},{start:{line:38,column:10},end:{line:42,column:5}}],line:38},"4":{loc:{start:{line:51,column:0},end:{line:92,column:5}},type:"if",locations:[{start:{line:51,column:0},end:{line:92,column:5}},{start:{line:51,column:0},end:{line:92,column:5}}],line:51},"5":{loc:{start:{line:56,column:4},end:{line:89,column:5}},type:"if",locations:[{start:{line:56,column:4},end:{line:89,column:5}},{start:{line:56,column:4},end:{line:89,column:5}}],line:56},"6":{loc:{start:{line:56,column:8},end:{line:56,column:51}},type:"binary-expr",locations:[{start:{line:56,column:8},end:{line:56,column:25}},{start:{line:56,column:29},end:{line:56,column:51}}],line:56},"7":{loc:{start:{line:63,column:8},end:{line:86,column:9}},type:"if",locations:[{start:{line:63,column:8},end:{line:86,column:9}},{start:{line:63,column:8},end:{line:86,column:9}}],line:63},"8":{loc:{start:{line:66,column:14},end:{line:86,column:9}},type:"if",locations:[{start:{line:66,column:14},end:{line:86,column:9}},{start:{line:66,column:14},end:{line:86,column:9}}],line:66},"9":{loc:{start:{line:69,column:14},end:{line:86,column:9}},type:"if",locations:[{start:{line:69,column:14},end:{line:86,column:9}},{start:{line:69,column:14},end:{line:86,column:9}}],line:69},"10":{loc:{start:{line:69,column:18},end:{line:69,column:73}},type:"binary-expr",locations:[{start:{line:69,column:18},end:{line:69,column:45}},{start:{line:69,column:49},end:{line:69,column:73}}],line:69},"11":{loc:{start:{line:75,column:12},end:{line:85,column:13}},type:"if",locations:[{start:{line:75,column:12},end:{line:85,column:13}},{start:{line:75,column:12},end:{line:85,column:13}}],line:75},"12":{loc:{start:{line:104,column:4},end:{line:128,column:5}},type:"if",locations:[{start:{line:104,column:4},end:{line:128,column:5}},{start:{line:104,column:4},end:{line:128,column:5}}],line:104},"13":{loc:{start:{line:104,column:8},end:{line:104,column:51}},type:"binary-expr",locations:[{start:{line:104,column:8},end:{line:104,column:25}},{start:{line:104,column:29},end:{line:104,column:51}}],line:104},"14":{loc:{start:{line:111,column:9},end:{line:125,column:10}},type:"if",locations:[{start:{line:111,column:9},end:{line:125,column:10}},{start:{line:111,column:9},end:{line:125,column:10}}],line:111},"15":{loc:{start:{line:114,column:14},end:{line:125,column:10}},type:"if",locations:[{start:{line:114,column:14},end:{line:125,column:10}},{start:{line:114,column:14},end:{line:125,column:10}}],line:114},"16":{loc:{start:{line:117,column:15},end:{line:125,column:10}},type:"if",locations:[{start:{line:117,column:15},end:{line:125,column:10}},{start:{line:117,column:15},end:{line:125,column:10}}],line:117},"17":{loc:{start:{line:117,column:19},end:{line:117,column:74}},type:"binary-expr",locations:[{start:{line:117,column:19},end:{line:117,column:46}},{start:{line:117,column:50},end:{line:117,column:74}}],line:117},"18":{loc:{start:{line:174,column:21},end:{line:174,column:56}},type:"binary-expr",locations:[{start:{line:174,column:22},end:{line:174,column:35}},{start:{line:174,column:41},end:{line:174,column:55}}],line:174},"19":{loc:{start:{line:176,column:17},end:{line:176,column:48}},type:"binary-expr",locations:[{start:{line:176,column:17},end:{line:176,column:30}},{start:{line:176,column:34},end:{line:176,column:48}}],line:176},"20":{loc:{start:{line:178,column:12},end:{line:178,column:37}},type:"binary-expr",locations:[{start:{line:178,column:12},end:{line:178,column:23}},{start:{line:178,column:27},end:{line:178,column:37}}],line:178}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0},b:{"0":[0,0],"1":[0,0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"858d28407ac2fd58b078fe003b808332db141c99"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_1nbcffmqdp=function(){return actualCoverage;};}return actualCoverage;}cov_1nbcffmqdp();const express=(cov_1nbcffmqdp().s[0]++,require('express'));const app=(cov_1nbcffmqdp().s[1]++,express());const bodyParser=(cov_1nbcffmqdp().s[2]++,require('body-parser'));const port=(cov_1nbcffmqdp().s[3]++,3010);const db=(cov_1nbcffmqdp().s[4]++,require("./db/CRUDoperations"));cov_1nbcffmqdp().s[5]++;app.use(bodyParser.urlencoded({extended:false}));cov_1nbcffmqdp().s[6]++;app.use(bodyParser.json());//Base URL to check Server Status 
cov_1nbcffmqdp().s[7]++;app.get('/',(req,res)=>{cov_1nbcffmqdp().f[0]++;cov_1nbcffmqdp().s[8]++;console.log(`Base URL Hit - Server is UP and Running.`);cov_1nbcffmqdp().s[9]++;res.status(200).send("Server is UP and Running.");});//Function to check 9 to 5 Weekday 
//Functionality to Add funds 
/* 1.Request must have User id and valid Fund value.
   2.Funds can't be negative.
*/cov_1nbcffmqdp().s[10]++;app.post('/addFund',async(req,res)=>{cov_1nbcffmqdp().f[1]++;cov_1nbcffmqdp().s[11]++;console.log('Requested User ID ='+req.body.userID);cov_1nbcffmqdp().s[12]++;console.log('Requested User fund = '+req.body.fund);let userID=(cov_1nbcffmqdp().s[13]++,req.body.userID);let fund=(cov_1nbcffmqdp().s[14]++,req.body.fund);cov_1nbcffmqdp().s[15]++;if((cov_1nbcffmqdp().b[1][0]++,userID!=undefined)&&(cov_1nbcffmqdp().b[1][1]++,fund!=undefined)&&(cov_1nbcffmqdp().b[1][2]++,fund>0)){cov_1nbcffmqdp().b[0][0]++;cov_1nbcffmqdp().s[16]++;console.log('Valid Request and Parameter, Checking the User ID in Database.');const doesUserExist=(cov_1nbcffmqdp().s[17]++,await getUserByID(userID));cov_1nbcffmqdp().s[18]++;console.log(doesUserExist);cov_1nbcffmqdp().s[19]++;if(doesUserExist[0]!=undefined){cov_1nbcffmqdp().b[2][0]++;cov_1nbcffmqdp().s[20]++;console.log('Updating User with User ID:'+userID+' Adding Funds '+fund);const user=(cov_1nbcffmqdp().s[21]++,await addUserFund(userID,fund));cov_1nbcffmqdp().s[22]++;res.status(200).json({user});}else{cov_1nbcffmqdp().b[2][1]++;cov_1nbcffmqdp().s[23]++;res.status(400).json({"error":"No User with this User ID","requestBody":req.body});}}else{cov_1nbcffmqdp().b[0][1]++;cov_1nbcffmqdp().s[24]++;if(fund<0){cov_1nbcffmqdp().b[3][0]++;cov_1nbcffmqdp().s[25]++;res.status(400).json({"error":"Fund value can not be negative","requestBody":req.body});}else{cov_1nbcffmqdp().b[3][1]++;cov_1nbcffmqdp().s[26]++;res.status(400).json({"error":"Request has incorrect parameters","requestBody":req.body});}}});//API to Buy a company
/* 1.Valid User id 
   2.Valid Company Name
   3.Funds Should be enough for company */cov_1nbcffmqdp().s[27]++;app.post('/buyEquity',async(req,res)=>{cov_1nbcffmqdp().f[2]++;cov_1nbcffmqdp().s[28]++;if(checkTime()){cov_1nbcffmqdp().b[4][0]++;cov_1nbcffmqdp().s[29]++;console.log('Requested User ID = '+req.body.userID);cov_1nbcffmqdp().s[30]++;console.log('Requested Company Name = '+req.body.companyName);let userID=(cov_1nbcffmqdp().s[31]++,req.body.userID);let companyName=(cov_1nbcffmqdp().s[32]++,req.body.companyName);cov_1nbcffmqdp().s[33]++;if((cov_1nbcffmqdp().b[6][0]++,userID!=undefined)&&(cov_1nbcffmqdp().b[6][1]++,companyName!=undefined)){cov_1nbcffmqdp().b[5][0]++;// Checking if Company and User exist in database
const doesCompanyExist=(cov_1nbcffmqdp().s[34]++,await getCompanyByName(companyName));const doesUserExist=(cov_1nbcffmqdp().s[35]++,await getUserByID(userID));let userFund;let companyPrice;cov_1nbcffmqdp().s[36]++;console.log('Finding User with User ID:'+userID+' Adding Company '+companyName);cov_1nbcffmqdp().s[37]++;if(doesCompanyExist[0]==undefined){cov_1nbcffmqdp().b[7][0]++;cov_1nbcffmqdp().s[38]++;console.log('Company ID does not exist in Database');cov_1nbcffmqdp().s[39]++;res.status(400).json({"error":"No Company with requested ID","requestBody":req.body});}else{cov_1nbcffmqdp().b[7][1]++;cov_1nbcffmqdp().s[40]++;if(doesUserExist[0]==undefined){cov_1nbcffmqdp().b[8][0]++;cov_1nbcffmqdp().s[41]++;console.log('No User with this ID exist in Database');cov_1nbcffmqdp().s[42]++;res.status(400).json({"error":"No User with requested ID","requestBody":req.body});}else{cov_1nbcffmqdp().b[8][1]++;cov_1nbcffmqdp().s[43]++;if((cov_1nbcffmqdp().b[10][0]++,doesCompanyExist!=undefined)&&(cov_1nbcffmqdp().b[10][1]++,doesUserExist!=undefined)){cov_1nbcffmqdp().b[9][0]++;cov_1nbcffmqdp().s[44]++;console.log('Valid User ID:'+userID+' and Company with name '+companyName);cov_1nbcffmqdp().s[45]++;console.log('Checking User Fund with User ID:'+doesUserExist[0].Balance+'with Company Price'+doesCompanyExist[0].Price);cov_1nbcffmqdp().s[46]++;userFund=doesUserExist[0].Balance;cov_1nbcffmqdp().s[47]++;companyPrice=doesCompanyExist[0].Price;cov_1nbcffmqdp().s[48]++;console.log('Checking User Fund By Userid = '+userFund+",Company Price ="+doesCompanyExist[0].Price);cov_1nbcffmqdp().s[49]++;if(userFund<companyPrice){cov_1nbcffmqdp().b[11][0]++;cov_1nbcffmqdp().s[50]++;console.log('User fund is less than company Price ');cov_1nbcffmqdp().s[51]++;res.status(400).json({"error":"User fund is not enough ","requestBody":req.body});}else{cov_1nbcffmqdp().b[11][1]++;cov_1nbcffmqdp().s[52]++;console.log('User has enough fund to buy equity');const user=(cov_1nbcffmqdp().s[53]++,await deductUserFund(userID,companyPrice));//Add compnay to user Companies.
let isSuccess=(cov_1nbcffmqdp().s[54]++,await addCompanyToUser(userID,companyName));cov_1nbcffmqdp().s[55]++;console.log(`Addding company to user `+isSuccess);cov_1nbcffmqdp().s[56]++;res.status(200).json({"Success":"Request has been processed","requestBody":req.body});}}else{cov_1nbcffmqdp().b[9][1]++;}}}}else{cov_1nbcffmqdp().b[5][1]++;cov_1nbcffmqdp().s[57]++;res.status(400).json({"error":"Request has incorrect parameters","requestBody":req.body});}}else{cov_1nbcffmqdp().b[4][1]++;cov_1nbcffmqdp().s[58]++;res.status(400).json({"error":"Market is open during Mon-Fri ,9 AM -5 PM","requestBody":req.body});}});//API to sell a company
/* 1.Valid User id 
   2.User Should have Company to sell
*/cov_1nbcffmqdp().s[59]++;app.post('/sellEquity',async(req,res)=>{cov_1nbcffmqdp().f[3]++;cov_1nbcffmqdp().s[60]++;console.log('Requested User ID = '+req.body.userID);cov_1nbcffmqdp().s[61]++;console.log('Requested Company Name = '+req.body.companyName);let userID=(cov_1nbcffmqdp().s[62]++,req.body.userID);let companyName=(cov_1nbcffmqdp().s[63]++,req.body.companyName);cov_1nbcffmqdp().s[64]++;if((cov_1nbcffmqdp().b[13][0]++,userID!=undefined)&&(cov_1nbcffmqdp().b[13][1]++,companyName!=undefined)){cov_1nbcffmqdp().b[12][0]++;// Checking if Company and user Exist
const doesCompanyExist=(cov_1nbcffmqdp().s[65]++,await getUserCompanyByID(companyName));const doesUserExist=(cov_1nbcffmqdp().s[66]++,await getUserByID(userID));let userFund;let companyPrice;cov_1nbcffmqdp().s[67]++;console.log('Finding User with User ID:'+userID+' and Company by Name '+companyName);cov_1nbcffmqdp().s[68]++;if(doesUserExist[0]==undefined){cov_1nbcffmqdp().b[14][0]++;cov_1nbcffmqdp().s[69]++;console.log('No User with this ID exist in Database');cov_1nbcffmqdp().s[70]++;res.status(400).json({"error":"No User with requested ID","requestBody":req.body});}else{cov_1nbcffmqdp().b[14][1]++;cov_1nbcffmqdp().s[71]++;if(doesCompanyExist[0]==undefined){cov_1nbcffmqdp().b[15][0]++;cov_1nbcffmqdp().s[72]++;console.log('User doesnt have this company in his list so he cant sell this');cov_1nbcffmqdp().s[73]++;res.status(400).json({"error":"No Company with requested ID","requestBody":req.body});}else{cov_1nbcffmqdp().b[15][1]++;cov_1nbcffmqdp().s[74]++;if((cov_1nbcffmqdp().b[17][0]++,doesCompanyExist!=undefined)&&(cov_1nbcffmqdp().b[17][1]++,doesUserExist!=undefined)){cov_1nbcffmqdp().b[16][0]++;cov_1nbcffmqdp().s[75]++;console.log('Valid User ID:'+userID+' and Company with name '+companyName);let companyPrice=(cov_1nbcffmqdp().s[76]++,await getFundByCompanyName(companyName));cov_1nbcffmqdp().s[77]++;console.log('Company Price'+companyPrice[0].Price);const user=(cov_1nbcffmqdp().s[78]++,await addUserFund(userID,companyPrice[0].Price));// Remove company from user List
let isSuccess=(cov_1nbcffmqdp().s[79]++,await deletCompanyFromUser(userID,companyName));cov_1nbcffmqdp().s[80]++;res.status(200).json({"Success":"Request has been processed","requestBody":req.body});}else{cov_1nbcffmqdp().b[16][1]++;}}}}else{cov_1nbcffmqdp().b[12][1]++;cov_1nbcffmqdp().s[81]++;res.status(400).json({"error":"Request has incorrect parameters","requestBody":req.body});}});//Function to check if a user exits or not in DB 
function getUserByID(id){cov_1nbcffmqdp().f[4]++;cov_1nbcffmqdp().s[82]++;return db.getUserByID(id);}//Add Funds to User Balance
function addUserFund(ID,fund){cov_1nbcffmqdp().f[5]++;cov_1nbcffmqdp().s[83]++;return db.addUserFund(ID,fund);}//Deduct Funds from User Balance
function deductUserFund(ID,fund){cov_1nbcffmqdp().f[6]++;cov_1nbcffmqdp().s[84]++;return db.deductUserFund(ID,fund);}//Function to check if a company exits or not in DB 
function getCompanyByName(companyName){cov_1nbcffmqdp().f[7]++;cov_1nbcffmqdp().s[85]++;return db.getCompanyByID(companyName);}//Function to check if a user has the company to sell
function getUserCompanyByID(companyName){cov_1nbcffmqdp().f[8]++;cov_1nbcffmqdp().s[86]++;return db.getUserCompanyByID(companyName);}// Function to get fund of a company
function getFundByCompanyName(companyName){cov_1nbcffmqdp().f[9]++;cov_1nbcffmqdp().s[87]++;return db.getFundByCompanyName(companyName);}function addCompanyToUser(userID,companyName){cov_1nbcffmqdp().f[10]++;cov_1nbcffmqdp().s[88]++;return db.addCompanyToUser(userID,companyName);}function deletCompanyFromUser(userID,companyName){cov_1nbcffmqdp().f[11]++;cov_1nbcffmqdp().s[89]++;return db.deletCompanyFromUser(userID,companyName);}function checkTime(){cov_1nbcffmqdp().f[12]++;let currentDate=(cov_1nbcffmqdp().s[90]++,new Date());var currentDay=(cov_1nbcffmqdp().s[91]++,currentDate.getDay());var currentHour=(cov_1nbcffmqdp().s[92]++,currentDate.getHours());cov_1nbcffmqdp().s[93]++;console.log("is Week Day ? "+currentDay+" "+currentHour);var isValidDay=(cov_1nbcffmqdp().s[94]++,(cov_1nbcffmqdp().b[18][0]++,currentDay>2)||(cov_1nbcffmqdp().b[18][1]++,currentDay<6));// 6 = Saturday, 0 = Sunday
cov_1nbcffmqdp().s[95]++;console.log("is Week Day ? "+isValidDay);cov_1nbcffmqdp().s[96]++;isValidTime=(cov_1nbcffmqdp().b[19][0]++,currentHour>0)&&(cov_1nbcffmqdp().b[19][1]++,currentHour<24);cov_1nbcffmqdp().s[97]++;console.log("is 9-5 ? "+isValidTime);cov_1nbcffmqdp().s[98]++;return(cov_1nbcffmqdp().b[20][0]++,isValidTime)&&(cov_1nbcffmqdp().b[20][1]++,isValidDay);}cov_1nbcffmqdp().s[99]++;app.listen(port,()=>{cov_1nbcffmqdp().f[13]++;cov_1nbcffmqdp().s[100]++;console.log(`Example app listening at http://localhost:${port}`);});cov_1nbcffmqdp().s[101]++;module.exports=app;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNlcnZlci5qcyJdLCJuYW1lcyI6WyJleHByZXNzIiwicmVxdWlyZSIsImFwcCIsImJvZHlQYXJzZXIiLCJwb3J0IiwiZGIiLCJ1c2UiLCJ1cmxlbmNvZGVkIiwiZXh0ZW5kZWQiLCJqc29uIiwiZ2V0IiwicmVxIiwicmVzIiwiY29uc29sZSIsImxvZyIsInN0YXR1cyIsInNlbmQiLCJwb3N0IiwiYm9keSIsInVzZXJJRCIsImZ1bmQiLCJ1bmRlZmluZWQiLCJkb2VzVXNlckV4aXN0IiwiZ2V0VXNlckJ5SUQiLCJ1c2VyIiwiYWRkVXNlckZ1bmQiLCJjaGVja1RpbWUiLCJjb21wYW55TmFtZSIsImRvZXNDb21wYW55RXhpc3QiLCJnZXRDb21wYW55QnlOYW1lIiwidXNlckZ1bmQiLCJjb21wYW55UHJpY2UiLCJCYWxhbmNlIiwiUHJpY2UiLCJkZWR1Y3RVc2VyRnVuZCIsImlzU3VjY2VzcyIsImFkZENvbXBhbnlUb1VzZXIiLCJnZXRVc2VyQ29tcGFueUJ5SUQiLCJnZXRGdW5kQnlDb21wYW55TmFtZSIsImRlbGV0Q29tcGFueUZyb21Vc2VyIiwiaWQiLCJJRCIsImdldENvbXBhbnlCeUlEIiwiY3VycmVudERhdGUiLCJEYXRlIiwiY3VycmVudERheSIsImdldERheSIsImN1cnJlbnRIb3VyIiwiZ2V0SG91cnMiLCJpc1ZhbGlkRGF5IiwiaXNWYWxpZFRpbWUiLCJsaXN0ZW4iLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoicythQWVZOzJGQWZaLEtBQU1BLENBQUFBLE9BQU8sMEJBQUdDLE9BQU8sQ0FBQyxTQUFELENBQVYsQ0FBYixDQUNBLEtBQU1DLENBQUFBLEdBQUcsMEJBQUdGLE9BQU8sRUFBVixDQUFULENBQ0EsS0FBTUcsQ0FBQUEsVUFBVSwwQkFBR0YsT0FBTyxDQUFDLGFBQUQsQ0FBVixDQUFoQixDQUNBLEtBQU1HLENBQUFBLElBQUksMEJBQUcsSUFBSCxDQUFWLENBQ0EsS0FBTUMsQ0FBQUEsRUFBRSwwQkFBR0osT0FBTyxDQUFD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LENBQUFBLFVBQVUsMkJBQUcsNkJBQUNKLFVBQVUsQ0FBRSxDQUFiLGdDQUFvQkEsVUFBVSxDQUFHLENBQWpDLENBQUgsQ0FBZCxDQUFzRDtBQUx0Qyx5QkFNaEJoQyxPQUFPLENBQUNDLEdBQVIsQ0FBWSxpQkFBaUJtQyxVQUE3QixFQU5nQix5QkFPaEJDLFdBQVcsQ0FBRSw2QkFBQUgsV0FBVyxDQUFDLENBQVosZ0NBQWlCQSxXQUFXLENBQUMsRUFBN0IsQ0FBYixDQVBnQix5QkFRaEJsQyxPQUFPLENBQUNDLEdBQVIsQ0FBWSxZQUFZb0MsV0FBeEIsRUFSZ0IseUJBU2hCLE1BQVEsNkJBQUFBLFdBQVcsZ0NBQUlELFVBQUosQ0FBbkIsQ0FDSCxDLHlCQUVEL0MsR0FBRyxDQUFDaUQsTUFBSixDQUFXL0MsSUFBWCxDQUFpQixJQUFNLG9EQUNyQlMsT0FBTyxDQUFDQyxHQUFSLENBQWEsNkNBQTRDVixJQUFLLEVBQTlELEVBQ0QsQ0FGRCxFLDBCQUlBZ0QsTUFBTSxDQUFDQyxPQUFQLENBQWVuRCxHQUFmIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgZXhwcmVzcyA9IHJlcXVpcmUoJ2V4cHJlc3MnKVxyXG5jb25zdCBhcHAgPSBleHByZXNzKCk7XHJcbmNvbnN0IGJvZHlQYXJzZXIgPSByZXF1aXJlKCdib2R5LXBhcnNlcicpO1xyXG5jb25zdCBwb3J0ID0gMzAxMFxyXG5jb25zdCBkYiA9IHJlcXVpcmUoXCIuL2RiL0NSVURvcGVyYXRpb25zXCIpO1xyXG5cclxuYXBwLnVzZShib2R5UGFyc2VyLnVybGVuY29kZWQoe2V4dGVuZGVkOmZhbHNlfSkpO1xyXG5hcHAudXNlKGJvZHlQYXJzZXIuanNvbigpKTtcclxuXHJcbi8vQmFzZSBVUkwgdG8gY2hlY2sgU2VydmVyIFN0YXR1cyBcclxuYXBwLmdldCgnLycsIChyZXEsIHJlcykgPT4ge1xyXG4gICAgY29uc29sZS5sb2coYEJhc2UgVVJMIEhpdCAtIFNlcnZlciBpcyBVUCBhbmQgUnVubmluZy5gKTtcclxuICAgIHJlcy5zdGF0dXMoMjAwKS5zZW5kKFwiU2VydmVyIGlzIFVQIGFuZCBSdW5uaW5nLlwiKTtcclxufSlcclxuXHJcbi8vRnVuY3Rpb24gdG8gY2hlY2sgOSB0byA1IFdlZWtkYXkgXHJcbi8vRnVuY3Rpb25hbGl0eSB0byBBZGQgZnVuZHMgXHJcbi8qIDEuUmVxdWVzdCBtdXN0IGhhdmUgVXNlciBpZCBhbmQgdmFsaWQgRnVuZCB2YWx1ZS5cclxuICAgMi5GdW5kcyBjYW4ndCBiZSBuZWdhdGl2ZS5cclxuKi9cclxuYXBwLnBvc3QoJy9hZGRGdW5kJywgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgICBjb25zb2xlLmxvZygnUmVxdWVzdGVkIFVzZXIgSUQgPScgKyByZXEuYm9keS51c2VySUQpO1xyXG4gICAgY29uc29sZS5sb2coJ1JlcXVlc3RlZCBVc2VyIGZ1bmQgPSAnICsgcmVxLmJvZHkuZnVuZCk7XHJcbiAgICBsZXQgdXNlcklEPXJlcS5ib2R5LnVzZXJJRDtcclxuICAgIGxldCBmdW5kPXJlcS5ib2R5LmZ1bmQ7XHJcbiAgICBpZiAodXNlcklEIT11bmRlZmluZWQgJiYgZnVuZCE9dW5kZWZpbmVkICAmJiBmdW5kID4gMCApe1xyXG4gICAgICAgY29uc29sZS5sb2coJ1ZhbGlkIFJlcXVlc3QgYW5kIFBhcmFtZXRlciwgQ2hlY2tpbmcgdGhlIFVzZXIgSUQgaW4gRGF0YWJhc2UuJyk7XHJcbiAgICAgICBjb25zdCBkb2VzVXNlckV4aXN0PWF3YWl0IGdldFVzZXJCeUlEKHVzZXJJRCk7XHJcbiAgICAgICBjb25zb2xlLmxvZyhkb2VzVXNlckV4aXN0KTtcclxuICAgICAgICBpZihkb2VzVXNlckV4aXN0WzBdICE9dW5kZWZpbmVkKXtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ1VwZGF0aW5nIFVzZXIgd2l0aCBVc2VyIElEOicgKyB1c2VySUQgKyAnIEFkZGluZyBGdW5kcyAnICsgZnVuZCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHVzZXI9YXdhaXQgYWRkVXNlckZ1bmQodXNlcklELGZ1bmQpO1xyXG4gICAgICAgICAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7dXNlcn0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNle1xyXG4gICAgICAgICAgICByZXMuc3RhdHVzKDQwMCkuanNvbih7XCJlcnJvclwiOlwiTm8gVXNlciB3aXRoIHRoaXMgVXNlciBJRFwiLFwicmVxdWVzdEJvZHlcIjogcmVxLmJvZHl9KTsgIFxyXG4gICAgICAgIH1cclxuICAgIH1lbHNlIGlmIChmdW5kPDApe1xyXG4gICAgICAgIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcImVycm9yXCI6XCJGdW5kIHZhbHVlIGNhbiBub3QgYmUgbmVnYXRpdmVcIixcInJlcXVlc3RCb2R5XCI6IHJlcS5ib2R5fSk7ICBcclxuICAgIH1lbHNle1xyXG4gICAgICAgIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcImVycm9yXCI6XCJSZXF1ZXN0IGhhcyBpbmNvcnJlY3QgcGFyYW1ldGVyc1wiLFwicmVxdWVzdEJvZHlcIjogcmVxLmJvZHl9KTsgIFxyXG4gICAgfVxyXG4gfSlcclxuXHJcbi8vQVBJIHRvIEJ1eSBhIGNvbXBhbnlcclxuLyogMS5WYWxpZCBVc2VyIGlkIFxyXG4gICAyLlZhbGlkIENvbXBhbnkgTmFtZVxyXG4gICAzLkZ1bmRzIFNob3VsZCBiZSBlbm91Z2ggZm9yIGNvbXBhbnkgKi9cclxuXHJcbmFwcC5wb3N0KCcvYnV5RXF1aXR5JywgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbmlmKGNoZWNrVGltZSgpKXtcclxuICAgIGNvbnNvbGUubG9nKCdSZXF1ZXN0ZWQgVXNlciBJRCA9ICcgKyByZXEuYm9keS51c2VySUQpO1xyXG4gICAgY29uc29sZS5sb2coJ1JlcXVlc3RlZCBDb21wYW55IE5hbWUgPSAnICsgcmVxLmJvZHkuY29tcGFueU5hbWUpO1xyXG4gICAgbGV0IHVzZXJJRD1yZXEuYm9keS51c2VySUQ7XHJcbiAgICBsZXQgY29tcGFueU5hbWU9cmVxLmJvZHkuY29tcGFueU5hbWU7XHJcbiAgICBpZiAodXNlcklEIT11bmRlZmluZWQgJiYgY29tcGFueU5hbWUhPXVuZGVmaW5lZCApe1xyXG4gICAgICAgIC8vIENoZWNraW5nIGlmIENvbXBhbnkgYW5kIFVzZXIgZXhpc3QgaW4gZGF0YWJhc2VcclxuICAgICAgICBjb25zdCBkb2VzQ29tcGFueUV4aXN0PWF3YWl0IGdldENvbXBhbnlCeU5hbWUoY29tcGFueU5hbWUpO1xyXG4gICAgICAgIGNvbnN0IGRvZXNVc2VyRXhpc3Q9YXdhaXQgZ2V0VXNlckJ5SUQodXNlcklEKTtcclxuICAgICAgICBsZXQgdXNlckZ1bmQ7XHJcbiAgICAgICAgbGV0IGNvbXBhbnlQcmljZTtcclxuICAgICAgICBjb25zb2xlLmxvZygnRmluZGluZyBVc2VyIHdpdGggVXNlciBJRDonICsgdXNlcklEICsgJyBBZGRpbmcgQ29tcGFueSAnICsgY29tcGFueU5hbWUpO1xyXG4gICAgICAgIGlmKGRvZXNDb21wYW55RXhpc3RbMF09PXVuZGVmaW5lZCl7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdDb21wYW55IElEIGRvZXMgbm90IGV4aXN0IGluIERhdGFiYXNlJyk7XHJcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcImVycm9yXCI6XCJObyBDb21wYW55IHdpdGggcmVxdWVzdGVkIElEXCIsXCJyZXF1ZXN0Qm9keVwiOiByZXEuYm9keX0pOyAgXHJcbiAgICAgICAgfWVsc2UgaWYgKGRvZXNVc2VyRXhpc3RbMF09PXVuZGVmaW5lZCApe1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnTm8gVXNlciB3aXRoIHRoaXMgSUQgZXhpc3QgaW4gRGF0YWJhc2UnKTtcclxuICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDApLmpzb24oe1wiZXJyb3JcIjpcIk5vIFVzZXIgd2l0aCByZXF1ZXN0ZWQgSURcIixcInJlcXVlc3RCb2R5XCI6IHJlcS5ib2R5fSk7ICBcclxuICAgICAgICB9ZWxzZSBpZiAoZG9lc0NvbXBhbnlFeGlzdCE9dW5kZWZpbmVkICYmIGRvZXNVc2VyRXhpc3QhPXVuZGVmaW5lZCl7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdWYWxpZCBVc2VyIElEOicgKyB1c2VySUQgKyAnIGFuZCBDb21wYW55IHdpdGggbmFtZSAnICsgY29tcGFueU5hbWUpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnQ2hlY2tpbmcgVXNlciBGdW5kIHdpdGggVXNlciBJRDonICsgZG9lc1VzZXJFeGlzdFswXS5CYWxhbmNlICsgJ3dpdGggQ29tcGFueSBQcmljZScgKyBkb2VzQ29tcGFueUV4aXN0WzBdLlByaWNlICk7XHJcbiAgICAgICAgICAgIHVzZXJGdW5kPWRvZXNVc2VyRXhpc3RbMF0uQmFsYW5jZTtcclxuICAgICAgICAgICAgY29tcGFueVByaWNlPWRvZXNDb21wYW55RXhpc3RbMF0uUHJpY2UgO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnQ2hlY2tpbmcgVXNlciBGdW5kIEJ5IFVzZXJpZCA9ICcrIHVzZXJGdW5kICtcIixDb21wYW55IFByaWNlID1cIitkb2VzQ29tcGFueUV4aXN0WzBdLlByaWNlICk7XHJcbiAgICAgICAgICAgIGlmKHVzZXJGdW5kPGNvbXBhbnlQcmljZSl7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnVXNlciBmdW5kIGlzIGxlc3MgdGhhbiBjb21wYW55IFByaWNlICcpO1xyXG4gICAgICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDApLmpzb24oe1wiZXJyb3JcIjpcIlVzZXIgZnVuZCBpcyBub3QgZW5vdWdoIFwiLFwicmVxdWVzdEJvZHlcIjogcmVxLmJvZHl9KTsgIFxyXG4gICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdVc2VyIGhhcyBlbm91Z2ggZnVuZCB0byBidXkgZXF1aXR5Jyk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB1c2VyPWF3YWl0IGRlZHVjdFVzZXJGdW5kKHVzZXJJRCxjb21wYW55UHJpY2UpO1xyXG4gICAgICAgICAgICAgICAgLy9BZGQgY29tcG5heSB0byB1c2VyIENvbXBhbmllcy5cclxuICAgICAgICAgICAgICAgIGxldCBpc1N1Y2Nlc3MgPWF3YWl0IGFkZENvbXBhbnlUb1VzZXIodXNlcklELGNvbXBhbnlOYW1lKTtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBBZGRkaW5nIGNvbXBhbnkgdG8gdXNlciBgICsgaXNTdWNjZXNzKTtcclxuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcIlN1Y2Nlc3NcIjpcIlJlcXVlc3QgaGFzIGJlZW4gcHJvY2Vzc2VkXCIsXCJyZXF1ZXN0Qm9keVwiOiByZXEuYm9keX0pOyBcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gICAgICAgXHJcbiAgICB9ZWxzZXtcclxuICAgICAgICByZXMuc3RhdHVzKDQwMCkuanNvbih7XCJlcnJvclwiOlwiUmVxdWVzdCBoYXMgaW5jb3JyZWN0IHBhcmFtZXRlcnNcIixcInJlcXVlc3RCb2R5XCI6IHJlcS5ib2R5fSk7ICBcclxuICAgIH19XHJcbmVsc2V7XHJcbiAgICByZXMuc3RhdHVzKDQwMCkuanNvbih7XCJlcnJvclwiOlwiTWFya2V0IGlzIG9wZW4gZHVyaW5nIE1vbi1GcmkgLDkgQU0gLTUgUE1cIixcInJlcXVlc3RCb2R5XCI6IHJlcS5ib2R5fSk7ICBcclxuICAgIH1cclxuICB9KSBcclxuXHJcbi8vQVBJIHRvIHNlbGwgYSBjb21wYW55XHJcbi8qIDEuVmFsaWQgVXNlciBpZCBcclxuICAgMi5Vc2VyIFNob3VsZCBoYXZlIENvbXBhbnkgdG8gc2VsbFxyXG4qL1xyXG5hcHAucG9zdCgnL3NlbGxFcXVpdHknLCBhc3luYyAocmVxLCByZXMpID0+IHtcclxuICAgIGNvbnNvbGUubG9nKCdSZXF1ZXN0ZWQgVXNlciBJRCA9ICcgKyByZXEuYm9keS51c2VySUQpO1xyXG4gICAgY29uc29sZS5sb2coJ1JlcXVlc3RlZCBDb21wYW55IE5hbWUgPSAnICsgcmVxLmJvZHkuY29tcGFueU5hbWUpO1xyXG4gICAgbGV0IHVzZXJJRD1yZXEuYm9keS51c2VySUQ7XHJcbiAgICBsZXQgY29tcGFueU5hbWU9cmVxLmJvZHkuY29tcGFueU5hbWU7XHJcbiAgICBpZiAodXNlcklEIT11bmRlZmluZWQgJiYgY29tcGFueU5hbWUhPXVuZGVmaW5lZCApe1xyXG4gICAgICAgICAvLyBDaGVja2luZyBpZiBDb21wYW55IGFuZCB1c2VyIEV4aXN0XHJcbiAgICAgICAgIGNvbnN0IGRvZXNDb21wYW55RXhpc3Q9YXdhaXQgZ2V0VXNlckNvbXBhbnlCeUlEKGNvbXBhbnlOYW1lKTtcclxuICAgICAgICAgY29uc3QgZG9lc1VzZXJFeGlzdD1hd2FpdCBnZXRVc2VyQnlJRCh1c2VySUQpO1xyXG4gICAgICAgICBsZXQgdXNlckZ1bmQ7XHJcbiAgICAgICAgIGxldCBjb21wYW55UHJpY2U7XHJcbiAgICAgICAgIGNvbnNvbGUubG9nKCdGaW5kaW5nIFVzZXIgd2l0aCBVc2VyIElEOicgKyB1c2VySUQgKyAnIGFuZCBDb21wYW55IGJ5IE5hbWUgJyArIGNvbXBhbnlOYW1lKTtcclxuICAgICAgICAgaWYoZG9lc1VzZXJFeGlzdFswXT09dW5kZWZpbmVkKXtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ05vIFVzZXIgd2l0aCB0aGlzIElEIGV4aXN0IGluIERhdGFiYXNlJyk7XHJcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcImVycm9yXCI6XCJObyBVc2VyIHdpdGggcmVxdWVzdGVkIElEXCIsXCJyZXF1ZXN0Qm9keVwiOiByZXEuYm9keX0pOyAgXHJcbiAgICAgICAgfWVsc2UgaWYgKGRvZXNDb21wYW55RXhpc3RbMF09PXVuZGVmaW5lZCApe1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnVXNlciBkb2VzbnQgaGF2ZSB0aGlzIGNvbXBhbnkgaW4gaGlzIGxpc3Qgc28gaGUgY2FudCBzZWxsIHRoaXMnKTtcclxuICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDApLmpzb24oe1wiZXJyb3JcIjpcIk5vIENvbXBhbnkgd2l0aCByZXF1ZXN0ZWQgSURcIixcInJlcXVlc3RCb2R5XCI6IHJlcS5ib2R5fSk7ICBcclxuICAgICAgICAgfWVsc2UgaWYgKGRvZXNDb21wYW55RXhpc3QhPXVuZGVmaW5lZCAmJiBkb2VzVXNlckV4aXN0IT11bmRlZmluZWQpe1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnVmFsaWQgVXNlciBJRDonICsgdXNlcklEICsgJyBhbmQgQ29tcGFueSB3aXRoIG5hbWUgJyArIGNvbXBhbnlOYW1lKTsgXHJcbiAgICAgICAgICAgIGxldCBjb21wYW55UHJpY2U9YXdhaXQgZ2V0RnVuZEJ5Q29tcGFueU5hbWUoY29tcGFueU5hbWUpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnQ29tcGFueSBQcmljZScrY29tcGFueVByaWNlWzBdLlByaWNlKTtcclxuICAgICAgICAgICAgY29uc3QgdXNlciA9IGF3YWl0IGFkZFVzZXJGdW5kKHVzZXJJRCxjb21wYW55UHJpY2VbMF0uUHJpY2UpO1xyXG4gICAgICAgICAgICAvLyBSZW1vdmUgY29tcGFueSBmcm9tIHVzZXIgTGlzdFxyXG4gICAgICAgICAgICBsZXQgaXNTdWNjZXNzPWF3YWl0IGRlbGV0Q29tcGFueUZyb21Vc2VyKHVzZXJJRCxjb21wYW55TmFtZSk7XHJcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcIlN1Y2Nlc3NcIjpcIlJlcXVlc3QgaGFzIGJlZW4gcHJvY2Vzc2VkXCIsXCJyZXF1ZXN0Qm9keVwiOiByZXEuYm9keX0pOyAgXHJcbiAgICAgICAgIH0gICAgICAgXHJcbiAgICB9ZWxzZXtcclxuICAgICAgICByZXMuc3RhdHVzKDQwMCkuanNvbih7XCJlcnJvclwiOlwiUmVxdWVzdCBoYXMgaW5jb3JyZWN0IHBhcmFtZXRlcnNcIixcInJlcXVlc3RCb2R5XCI6IHJlcS5ib2R5fSk7ICBcclxuICAgIH1cclxuICB9KSBcclxuXHJcbi8vRnVuY3Rpb24gdG8gY2hlY2sgaWYgYSB1c2VyIGV4aXRzIG9yIG5vdCBpbiBEQiBcclxuZnVuY3Rpb24gZ2V0VXNlckJ5SUQoaWQpe1xyXG4gICAgcmV0dXJuIGRiLmdldFVzZXJCeUlEKGlkKTtcclxufVxyXG5cclxuLy9BZGQgRnVuZHMgdG8gVXNlciBCYWxhbmNlXHJcbmZ1bmN0aW9uIGFkZFVzZXJGdW5kKElELGZ1bmQpe1xyXG4gICAgcmV0dXJuIGRiLmFkZFVzZXJGdW5kKElELGZ1bmQpO1xyXG59XHJcblxyXG4vL0RlZHVjdCBGdW5kcyBmcm9tIFVzZXIgQmFsYW5jZVxyXG5mdW5jdGlvbiBkZWR1Y3RVc2VyRnVuZChJRCxmdW5kKXtcclxuICAgIHJldHVybiBkYi5kZWR1Y3RVc2VyRnVuZChJRCxmdW5kKTtcclxufVxyXG5cclxuLy9GdW5jdGlvbiB0byBjaGVjayBpZiBhIGNvbXBhbnkgZXhpdHMgb3Igbm90IGluIERCIFxyXG5mdW5jdGlvbiBnZXRDb21wYW55QnlOYW1lKGNvbXBhbnlOYW1lKXtcclxuICAgIHJldHVybiBkYi5nZXRDb21wYW55QnlJRChjb21wYW55TmFtZSk7XHJcbn1cclxuXHJcbi8vRnVuY3Rpb24gdG8gY2hlY2sgaWYgYSB1c2VyIGhhcyB0aGUgY29tcGFueSB0byBzZWxsXHJcbmZ1bmN0aW9uIGdldFVzZXJDb21wYW55QnlJRChjb21wYW55TmFtZSl7XHJcbiAgICByZXR1cm4gZGIuZ2V0VXNlckNvbXBhbnlCeUlEKGNvbXBhbnlOYW1lKTtcclxufVxyXG5cclxuLy8gRnVuY3Rpb24gdG8gZ2V0IGZ1bmQgb2YgYSBjb21wYW55XHJcbmZ1bmN0aW9uIGdldEZ1bmRCeUNvbXBhbnlOYW1lKGNvbXBhbnlOYW1lKXtcclxuICAgIHJldHVybiBkYi5nZXRGdW5kQnlDb21wYW55TmFtZShjb21wYW55TmFtZSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGFkZENvbXBhbnlUb1VzZXIodXNlcklELGNvbXBhbnlOYW1lKXtcclxuICAgIHJldHVybiBkYi5hZGRDb21wYW55VG9Vc2VyKHVzZXJJRCxjb21wYW55TmFtZSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGRlbGV0Q29tcGFueUZyb21Vc2VyKHVzZXJJRCxjb21wYW55TmFtZSl7XHJcbiAgICByZXR1cm4gZGIuZGVsZXRDb21wYW55RnJvbVVzZXIodXNlcklELGNvbXBhbnlOYW1lKTtcclxufVxyXG5cclxuZnVuY3Rpb24gY2hlY2tUaW1lKCl7XHJcbiAgICBsZXQgY3VycmVudERhdGU9bmV3IERhdGUoKTtcclxuICAgIHZhciBjdXJyZW50RGF5ID0gY3VycmVudERhdGUuZ2V0RGF5KCk7XHJcbiAgICB2YXIgY3VycmVudEhvdXIgPSBjdXJyZW50RGF0ZS5nZXRIb3VycygpO1xyXG4gICAgY29uc29sZS5sb2coXCJpcyBXZWVrIERheSA/IFwiK2N1cnJlbnREYXkgKyBcIiBcIitjdXJyZW50SG91cilcclxuICAgIHZhciBpc1ZhbGlkRGF5ID0gKGN1cnJlbnREYXkgPjIpIHx8IChjdXJyZW50RGF5ICA8Nik7IC8vIDYgPSBTYXR1cmRheSwgMCA9IFN1bmRheVxyXG4gICAgY29uc29sZS5sb2coXCJpcyBXZWVrIERheSA/IFwiK2lzVmFsaWREYXkpXHJcbiAgICBpc1ZhbGlkVGltZT0gY3VycmVudEhvdXI+MCAmJiBjdXJyZW50SG91cjwyNDtcclxuICAgIGNvbnNvbGUubG9nKFwiaXMgOS01ID8gXCIraXNWYWxpZFRpbWUpXHJcbiAgICByZXR1cm4gKGlzVmFsaWRUaW1lICYmIGlzVmFsaWREYXkgKTtcclxufVxyXG5cclxuYXBwLmxpc3Rlbihwb3J0LCAoKSA9PiB7XHJcbiAgY29uc29sZS5sb2coYEV4YW1wbGUgYXBwIGxpc3RlbmluZyBhdCBodHRwOi8vbG9jYWxob3N0OiR7cG9ydH1gKVxyXG59KVxyXG5cclxubW9kdWxlLmV4cG9ydHM9YXBwOyJdfQ==