function cov_1nbcffmqdp(){var path="D:\\workspace\\NAGP_Unit_Testing\\server.js";var hash="ee4014e0103d3951fb4ec538c22da5b1235ed46f";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"D:\\workspace\\NAGP_Unit_Testing\\server.js",statementMap:{"0":{start:{line:1,column:16},end:{line:1,column:34}},"1":{start:{line:2,column:12},end:{line:2,column:21}},"2":{start:{line:3,column:19},end:{line:3,column:41}},"3":{start:{line:4,column:13},end:{line:4,column:17}},"4":{start:{line:5,column:11},end:{line:5,column:41}},"5":{start:{line:7,column:0},end:{line:7,column:49}},"6":{start:{line:8,column:0},end:{line:8,column:27}},"7":{start:{line:11,column:0},end:{line:14,column:2}},"8":{start:{line:12,column:4},end:{line:12,column:60}},"9":{start:{line:13,column:4},end:{line:13,column:54}},"10":{start:{line:21,column:0},end:{line:43,column:3}},"11":{start:{line:22,column:4},end:{line:22,column:57}},"12":{start:{line:23,column:4},end:{line:23,column:58}},"13":{start:{line:24,column:15},end:{line:24,column:30}},"14":{start:{line:25,column:13},end:{line:25,column:26}},"15":{start:{line:26,column:4},end:{line:42,column:5}},"16":{start:{line:27,column:7},end:{line:27,column:85}},"17":{start:{line:28,column:27},end:{line:28,column:52}},"18":{start:{line:29,column:7},end:{line:29,column:34}},"19":{start:{line:30,column:8},end:{line:37,column:9}},"20":{start:{line:31,column:12},end:{line:31,column:90}},"21":{start:{line:32,column:23},end:{line:32,column:53}},"22":{start:{line:33,column:12},end:{line:33,column:41}},"23":{start:{line:36,column:12},end:{line:36,column:96}},"24":{start:{line:38,column:10},end:{line:42,column:5}},"25":{start:{line:39,column:8},end:{line:39,column:97}},"26":{start:{line:41,column:8},end:{line:41,column:99}},"27":{start:{line:50,column:0},end:{line:93,column:4}},"28":{start:{line:51,column:0},end:{line:92,column:5}},"29":{start:{line:52,column:4},end:{line:52,column:58}},"30":{start:{line:53,column:4},end:{line:53,column:68}},"31":{start:{line:54,column:15},end:{line:54,column:30}},"32":{start:{line:55,column:20},end:{line:55,column:40}},"33":{start:{line:56,column:4},end:{line:89,column:5}},"34":{start:{line:58,column:31},end:{line:58,column:66}},"35":{start:{line:59,column:28},end:{line:59,column:53}},"36":{start:{line:62,column:8},end:{line:62,column:94}},"37":{start:{line:63,column:8},end:{line:86,column:9}},"38":{start:{line:64,column:12},end:{line:64,column:65}},"39":{start:{line:65,column:12},end:{line:65,column:99}},"40":{start:{line:66,column:14},end:{line:86,column:9}},"41":{start:{line:67,column:12},end:{line:67,column:66}},"42":{start:{line:68,column:12},end:{line:68,column:96}},"43":{start:{line:69,column:14},end:{line:86,column:9}},"44":{start:{line:70,column:12},end:{line:70,column:93}},"45":{start:{line:71,column:12},end:{line:71,column:139}},"46":{start:{line:72,column:12},end:{line:72,column:46}},"47":{start:{line:73,column:12},end:{line:73,column:52}},"48":{start:{line:74,column:12},end:{line:74,column:116}},"49":{start:{line:75,column:12},end:{line:85,column:13}},"50":{start:{line:76,column:16},end:{line:76,column:69}},"51":{start:{line:77,column:16},end:{line:77,column:99}},"52":{start:{line:79,column:16},end:{line:79,column:66}},"53":{start:{line:80,column:27},end:{line:80,column:68}},"54":{start:{line:82,column:31},end:{line:82,column:73}},"55":{start:{line:83,column:16},end:{line:83,column:56}},"56":{start:{line:84,column:16},end:{line:84,column:103}},"57":{start:{line:88,column:8},end:{line:88,column:99}},"58":{start:{line:91,column:4},end:{line:91,column:104}},"59":{start:{line:99,column:0},end:{line:133,column:4}},"60":{start:{line:100,column:4},end:{line:132,column:1}},"61":{start:{line:101,column:4},end:{line:101,column:58}},"62":{start:{line:102,column:4},end:{line:102,column:68}},"63":{start:{line:103,column:15},end:{line:103,column:30}},"64":{start:{line:104,column:20},end:{line:104,column:40}},"65":{start:{line:105,column:4},end:{line:129,column:5}},"66":{start:{line:107,column:32},end:{line:107,column:69}},"67":{start:{line:108,column:29},end:{line:108,column:54}},"68":{start:{line:111,column:9},end:{line:111,column:100}},"69":{start:{line:112,column:9},end:{line:126,column:10}},"70":{start:{line:113,column:12},end:{line:113,column:66}},"71":{start:{line:114,column:12},end:{line:114,column:96}},"72":{start:{line:115,column:14},end:{line:126,column:10}},"73":{start:{line:116,column:12},end:{line:116,column:90}},"74":{start:{line:117,column:12},end:{line:117,column:99}},"75":{start:{line:118,column:15},end:{line:126,column:10}},"76":{start:{line:119,column:12},end:{line:119,column:93}},"77":{start:{line:120,column:29},end:{line:120,column:68}},"78":{start:{line:121,column:12},end:{line:121,column:63}},"79":{start:{line:122,column:25},end:{line:122,column:72}},"80":{start:{line:124,column:26},end:{line:124,column:72}},"81":{start:{line:125,column:12},end:{line:125,column:99}},"82":{start:{line:128,column:8},end:{line:128,column:99}},"83":{start:{line:131,column:8},end:{line:131,column:108}},"84":{start:{line:137,column:4},end:{line:137,column:30}},"85":{start:{line:142,column:4},end:{line:142,column:35}},"86":{start:{line:147,column:4},end:{line:147,column:38}},"87":{start:{line:152,column:4},end:{line:152,column:42}},"88":{start:{line:157,column:4},end:{line:157,column:46}},"89":{start:{line:162,column:4},end:{line:162,column:48}},"90":{start:{line:166,column:4},end:{line:166,column:51}},"91":{start:{line:170,column:4},end:{line:170,column:55}},"92":{start:{line:174,column:20},end:{line:174,column:30}},"93":{start:{line:175,column:21},end:{line:175,column:41}},"94":{start:{line:176,column:22},end:{line:176,column:44}},"95":{start:{line:177,column:4},end:{line:177,column:62}},"96":{start:{line:178,column:21},end:{line:178,column:56}},"97":{start:{line:179,column:4},end:{line:179,column:44}},"98":{start:{line:180,column:4},end:{line:180,column:50}},"99":{start:{line:181,column:4},end:{line:181,column:40}},"100":{start:{line:182,column:4},end:{line:182,column:40}},"101":{start:{line:185,column:0},end:{line:187,column:2}},"102":{start:{line:186,column:2},end:{line:186,column:66}},"103":{start:{line:189,column:0},end:{line:189,column:19}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:11,column:13},end:{line:11,column:14}},loc:{start:{line:11,column:27},end:{line:14,column:1}},line:11},"1":{name:"(anonymous_1)",decl:{start:{line:21,column:21},end:{line:21,column:22}},loc:{start:{line:21,column:41},end:{line:43,column:2}},line:21},"2":{name:"(anonymous_2)",decl:{start:{line:50,column:23},end:{line:50,column:24}},loc:{start:{line:50,column:43},end:{line:93,column:3}},line:50},"3":{name:"(anonymous_3)",decl:{start:{line:99,column:24},end:{line:99,column:25}},loc:{start:{line:99,column:44},end:{line:133,column:3}},line:99},"4":{name:"getUserByID",decl:{start:{line:136,column:9},end:{line:136,column:20}},loc:{start:{line:136,column:24},end:{line:138,column:1}},line:136},"5":{name:"addUserFund",decl:{start:{line:141,column:9},end:{line:141,column:20}},loc:{start:{line:141,column:29},end:{line:143,column:1}},line:141},"6":{name:"deductUserFund",decl:{start:{line:146,column:9},end:{line:146,column:23}},loc:{start:{line:146,column:32},end:{line:148,column:1}},line:146},"7":{name:"getCompanyByName",decl:{start:{line:151,column:9},end:{line:151,column:25}},loc:{start:{line:151,column:38},end:{line:153,column:1}},line:151},"8":{name:"getUserCompanyByID",decl:{start:{line:156,column:9},end:{line:156,column:27}},loc:{start:{line:156,column:40},end:{line:158,column:1}},line:156},"9":{name:"getFundByCompanyName",decl:{start:{line:161,column:9},end:{line:161,column:29}},loc:{start:{line:161,column:42},end:{line:163,column:1}},line:161},"10":{name:"addCompanyToUser",decl:{start:{line:165,column:9},end:{line:165,column:25}},loc:{start:{line:165,column:45},end:{line:167,column:1}},line:165},"11":{name:"deletCompanyFromUser",decl:{start:{line:169,column:9},end:{line:169,column:29}},loc:{start:{line:169,column:49},end:{line:171,column:1}},line:169},"12":{name:"checkTime",decl:{start:{line:173,column:9},end:{line:173,column:18}},loc:{start:{line:173,column:20},end:{line:183,column:1}},line:173},"13":{name:"(anonymous_13)",decl:{start:{line:185,column:17},end:{line:185,column:18}},loc:{start:{line:185,column:23},end:{line:187,column:1}},line:185}},branchMap:{"0":{loc:{start:{line:26,column:4},end:{line:42,column:5}},type:"if",locations:[{start:{line:26,column:4},end:{line:42,column:5}},{start:{line:26,column:4},end:{line:42,column:5}}],line:26},"1":{loc:{start:{line:26,column:8},end:{line:26,column:57}},type:"binary-expr",locations:[{start:{line:26,column:8},end:{line:26,column:25}},{start:{line:26,column:29},end:{line:26,column:44}},{start:{line:26,column:49},end:{line:26,column:57}}],line:26},"2":{loc:{start:{line:30,column:8},end:{line:37,column:9}},type:"if",locations:[{start:{line:30,column:8},end:{line:37,column:9}},{start:{line:30,column:8},end:{line:37,column:9}}],line:30},"3":{loc:{start:{line:38,column:10},end:{line:42,column:5}},type:"if",locations:[{start:{line:38,column:10},end:{line:42,column:5}},{start:{line:38,column:10},end:{line:42,column:5}}],line:38},"4":{loc:{start:{line:51,column:0},end:{line:92,column:5}},type:"if",locations:[{start:{line:51,column:0},end:{line:92,column:5}},{start:{line:51,column:0},end:{line:92,column:5}}],line:51},"5":{loc:{start:{line:56,column:4},end:{line:89,column:5}},type:"if",locations:[{start:{line:56,column:4},end:{line:89,column:5}},{start:{line:56,column:4},end:{line:89,column:5}}],line:56},"6":{loc:{start:{line:56,column:8},end:{line:56,column:51}},type:"binary-expr",locations:[{start:{line:56,column:8},end:{line:56,column:25}},{start:{line:56,column:29},end:{line:56,column:51}}],line:56},"7":{loc:{start:{line:63,column:8},end:{line:86,column:9}},type:"if",locations:[{start:{line:63,column:8},end:{line:86,column:9}},{start:{line:63,column:8},end:{line:86,column:9}}],line:63},"8":{loc:{start:{line:66,column:14},end:{line:86,column:9}},type:"if",locations:[{start:{line:66,column:14},end:{line:86,column:9}},{start:{line:66,column:14},end:{line:86,column:9}}],line:66},"9":{loc:{start:{line:69,column:14},end:{line:86,column:9}},type:"if",locations:[{start:{line:69,column:14},end:{line:86,column:9}},{start:{line:69,column:14},end:{line:86,column:9}}],line:69},"10":{loc:{start:{line:69,column:18},end:{line:69,column:73}},type:"binary-expr",locations:[{start:{line:69,column:18},end:{line:69,column:45}},{start:{line:69,column:49},end:{line:69,column:73}}],line:69},"11":{loc:{start:{line:75,column:12},end:{line:85,column:13}},type:"if",locations:[{start:{line:75,column:12},end:{line:85,column:13}},{start:{line:75,column:12},end:{line:85,column:13}}],line:75},"12":{loc:{start:{line:100,column:4},end:{line:132,column:1}},type:"if",locations:[{start:{line:100,column:4},end:{line:132,column:1}},{start:{line:100,column:4},end:{line:132,column:1}}],line:100},"13":{loc:{start:{line:105,column:4},end:{line:129,column:5}},type:"if",locations:[{start:{line:105,column:4},end:{line:129,column:5}},{start:{line:105,column:4},end:{line:129,column:5}}],line:105},"14":{loc:{start:{line:105,column:8},end:{line:105,column:51}},type:"binary-expr",locations:[{start:{line:105,column:8},end:{line:105,column:25}},{start:{line:105,column:29},end:{line:105,column:51}}],line:105},"15":{loc:{start:{line:112,column:9},end:{line:126,column:10}},type:"if",locations:[{start:{line:112,column:9},end:{line:126,column:10}},{start:{line:112,column:9},end:{line:126,column:10}}],line:112},"16":{loc:{start:{line:115,column:14},end:{line:126,column:10}},type:"if",locations:[{start:{line:115,column:14},end:{line:126,column:10}},{start:{line:115,column:14},end:{line:126,column:10}}],line:115},"17":{loc:{start:{line:118,column:15},end:{line:126,column:10}},type:"if",locations:[{start:{line:118,column:15},end:{line:126,column:10}},{start:{line:118,column:15},end:{line:126,column:10}}],line:118},"18":{loc:{start:{line:118,column:19},end:{line:118,column:74}},type:"binary-expr",locations:[{start:{line:118,column:19},end:{line:118,column:46}},{start:{line:118,column:50},end:{line:118,column:74}}],line:118},"19":{loc:{start:{line:178,column:21},end:{line:178,column:56}},type:"binary-expr",locations:[{start:{line:178,column:22},end:{line:178,column:35}},{start:{line:178,column:41},end:{line:178,column:55}}],line:178},"20":{loc:{start:{line:180,column:17},end:{line:180,column:48}},type:"binary-expr",locations:[{start:{line:180,column:17},end:{line:180,column:30}},{start:{line:180,column:34},end:{line:180,column:48}}],line:180},"21":{loc:{start:{line:182,column:12},end:{line:182,column:37}},type:"binary-expr",locations:[{start:{line:182,column:12},end:{line:182,column:23}},{start:{line:182,column:27},end:{line:182,column:37}}],line:182}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0},b:{"0":[0,0],"1":[0,0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"ee4014e0103d3951fb4ec538c22da5b1235ed46f"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_1nbcffmqdp=function(){return actualCoverage;};}return actualCoverage;}cov_1nbcffmqdp();const express=(cov_1nbcffmqdp().s[0]++,require('express'));const app=(cov_1nbcffmqdp().s[1]++,express());const bodyParser=(cov_1nbcffmqdp().s[2]++,require('body-parser'));const port=(cov_1nbcffmqdp().s[3]++,3010);const db=(cov_1nbcffmqdp().s[4]++,require("./db/CRUDoperations"));cov_1nbcffmqdp().s[5]++;app.use(bodyParser.urlencoded({extended:false}));cov_1nbcffmqdp().s[6]++;app.use(bodyParser.json());//Base URL to check Server Status 
cov_1nbcffmqdp().s[7]++;app.get('/',(req,res)=>{cov_1nbcffmqdp().f[0]++;cov_1nbcffmqdp().s[8]++;console.log(`Base URL Hit - Server is UP and Running.`);cov_1nbcffmqdp().s[9]++;res.status(200).send("Server is UP and Running.");});//Function to check 9 to 5 Weekday 
//Functionality to Add funds 
/* 1.Request must have User id and valid Fund value.
   2.Funds can't be negative.
*/cov_1nbcffmqdp().s[10]++;app.post('/addFund',async(req,res)=>{cov_1nbcffmqdp().f[1]++;cov_1nbcffmqdp().s[11]++;console.log('Requested User ID ='+req.body.userID);cov_1nbcffmqdp().s[12]++;console.log('Requested User fund = '+req.body.fund);let userID=(cov_1nbcffmqdp().s[13]++,req.body.userID);let fund=(cov_1nbcffmqdp().s[14]++,req.body.fund);cov_1nbcffmqdp().s[15]++;if((cov_1nbcffmqdp().b[1][0]++,userID!=undefined)&&(cov_1nbcffmqdp().b[1][1]++,fund!=undefined)&&(cov_1nbcffmqdp().b[1][2]++,fund>0)){cov_1nbcffmqdp().b[0][0]++;cov_1nbcffmqdp().s[16]++;console.log('Valid Request and Parameter, Checking the User ID in Database.');const doesUserExist=(cov_1nbcffmqdp().s[17]++,await getUserByID(userID));cov_1nbcffmqdp().s[18]++;console.log(doesUserExist);cov_1nbcffmqdp().s[19]++;if(doesUserExist[0]!=undefined){cov_1nbcffmqdp().b[2][0]++;cov_1nbcffmqdp().s[20]++;console.log('Updating User with User ID:'+userID+' Adding Funds '+fund);const user=(cov_1nbcffmqdp().s[21]++,await addUserFund(userID,fund));cov_1nbcffmqdp().s[22]++;res.status(200).json({user});}else{cov_1nbcffmqdp().b[2][1]++;cov_1nbcffmqdp().s[23]++;res.status(400).json({"error":"No User with this User ID","requestBody":req.body});}}else{cov_1nbcffmqdp().b[0][1]++;cov_1nbcffmqdp().s[24]++;if(fund<0){cov_1nbcffmqdp().b[3][0]++;cov_1nbcffmqdp().s[25]++;res.status(400).json({"error":"Fund value can not be negative","requestBody":req.body});}else{cov_1nbcffmqdp().b[3][1]++;cov_1nbcffmqdp().s[26]++;res.status(400).json({"error":"Request has incorrect parameters","requestBody":req.body});}}});//API to Buy a company
/* 1.Valid User id 
   2.Valid Company Name
   3.Funds Should be enough for company */cov_1nbcffmqdp().s[27]++;app.post('/buyEquity',async(req,res)=>{cov_1nbcffmqdp().f[2]++;cov_1nbcffmqdp().s[28]++;if(checkTime()){cov_1nbcffmqdp().b[4][0]++;cov_1nbcffmqdp().s[29]++;console.log('Requested User ID = '+req.body.userID);cov_1nbcffmqdp().s[30]++;console.log('Requested Company Name = '+req.body.companyName);let userID=(cov_1nbcffmqdp().s[31]++,req.body.userID);let companyName=(cov_1nbcffmqdp().s[32]++,req.body.companyName);cov_1nbcffmqdp().s[33]++;if((cov_1nbcffmqdp().b[6][0]++,userID!=undefined)&&(cov_1nbcffmqdp().b[6][1]++,companyName!=undefined)){cov_1nbcffmqdp().b[5][0]++;// Checking if Company and User exist in database
const doesCompanyExist=(cov_1nbcffmqdp().s[34]++,await getCompanyByName(companyName));const doesUserExist=(cov_1nbcffmqdp().s[35]++,await getUserByID(userID));let userFund;let companyPrice;cov_1nbcffmqdp().s[36]++;console.log('Finding User with User ID:'+userID+' Adding Company '+companyName);cov_1nbcffmqdp().s[37]++;if(doesCompanyExist[0]==undefined){cov_1nbcffmqdp().b[7][0]++;cov_1nbcffmqdp().s[38]++;console.log('Company ID does not exist in Database');cov_1nbcffmqdp().s[39]++;res.status(400).json({"error":"No Company with requested ID","requestBody":req.body});}else{cov_1nbcffmqdp().b[7][1]++;cov_1nbcffmqdp().s[40]++;if(doesUserExist[0]==undefined){cov_1nbcffmqdp().b[8][0]++;cov_1nbcffmqdp().s[41]++;console.log('No User with this ID exist in Database');cov_1nbcffmqdp().s[42]++;res.status(400).json({"error":"No User with requested ID","requestBody":req.body});}else{cov_1nbcffmqdp().b[8][1]++;cov_1nbcffmqdp().s[43]++;if((cov_1nbcffmqdp().b[10][0]++,doesCompanyExist!=undefined)&&(cov_1nbcffmqdp().b[10][1]++,doesUserExist!=undefined)){cov_1nbcffmqdp().b[9][0]++;cov_1nbcffmqdp().s[44]++;console.log('Valid User ID:'+userID+' and Company with name '+companyName);cov_1nbcffmqdp().s[45]++;console.log('Checking User Fund with User ID:'+doesUserExist[0].Balance+'with Company Price'+doesCompanyExist[0].Price);cov_1nbcffmqdp().s[46]++;userFund=doesUserExist[0].Balance;cov_1nbcffmqdp().s[47]++;companyPrice=doesCompanyExist[0].Price;cov_1nbcffmqdp().s[48]++;console.log('Checking User Fund By Userid = '+userFund+",Company Price ="+doesCompanyExist[0].Price);cov_1nbcffmqdp().s[49]++;if(userFund<companyPrice){cov_1nbcffmqdp().b[11][0]++;cov_1nbcffmqdp().s[50]++;console.log('User fund is less than company Price ');cov_1nbcffmqdp().s[51]++;res.status(400).json({"error":"User fund is not enough ","requestBody":req.body});}else{cov_1nbcffmqdp().b[11][1]++;cov_1nbcffmqdp().s[52]++;console.log('User has enough fund to buy equity');const user=(cov_1nbcffmqdp().s[53]++,await deductUserFund(userID,companyPrice));//Add compnay to user Companies.
let isSuccess=(cov_1nbcffmqdp().s[54]++,await addCompanyToUser(userID,companyName));cov_1nbcffmqdp().s[55]++;console.log(`Addding company to user `);cov_1nbcffmqdp().s[56]++;res.status(200).json({"Success":"Request has been processed","requestBody":req.body});}}else{cov_1nbcffmqdp().b[9][1]++;}}}}else{cov_1nbcffmqdp().b[5][1]++;cov_1nbcffmqdp().s[57]++;res.status(400).json({"error":"Request has incorrect parameters","requestBody":req.body});}}else{cov_1nbcffmqdp().b[4][1]++;cov_1nbcffmqdp().s[58]++;res.status(400).json({"error":"Market is open during Mon-Fri ,9 AM -5 PM","requestBody":req.body});}});//API to sell a company
/* 1.Valid User id 
   2.User Should have Company to sell
*/cov_1nbcffmqdp().s[59]++;app.post('/sellEquity',async(req,res)=>{cov_1nbcffmqdp().f[3]++;cov_1nbcffmqdp().s[60]++;if(checkTime()){cov_1nbcffmqdp().b[12][0]++;cov_1nbcffmqdp().s[61]++;console.log('Requested User ID = '+req.body.userID);cov_1nbcffmqdp().s[62]++;console.log('Requested Company Name = '+req.body.companyName);let userID=(cov_1nbcffmqdp().s[63]++,req.body.userID);let companyName=(cov_1nbcffmqdp().s[64]++,req.body.companyName);cov_1nbcffmqdp().s[65]++;if((cov_1nbcffmqdp().b[14][0]++,userID!=undefined)&&(cov_1nbcffmqdp().b[14][1]++,companyName!=undefined)){cov_1nbcffmqdp().b[13][0]++;// Checking if Company and user Exist
const doesCompanyExist=(cov_1nbcffmqdp().s[66]++,await getUserCompanyByID(companyName));const doesUserExist=(cov_1nbcffmqdp().s[67]++,await getUserByID(userID));let userFund;let companyPrice;cov_1nbcffmqdp().s[68]++;console.log('Finding User with User ID:'+userID+' and Company by Name '+companyName);cov_1nbcffmqdp().s[69]++;if(doesUserExist[0]==undefined){cov_1nbcffmqdp().b[15][0]++;cov_1nbcffmqdp().s[70]++;console.log('No User with this ID exist in Database');cov_1nbcffmqdp().s[71]++;res.status(400).json({"error":"No User with requested ID","requestBody":req.body});}else{cov_1nbcffmqdp().b[15][1]++;cov_1nbcffmqdp().s[72]++;if(doesCompanyExist[0]==undefined){cov_1nbcffmqdp().b[16][0]++;cov_1nbcffmqdp().s[73]++;console.log('User doesnt have this company in his list so he cant sell this');cov_1nbcffmqdp().s[74]++;res.status(400).json({"error":"No Company with requested ID","requestBody":req.body});}else{cov_1nbcffmqdp().b[16][1]++;cov_1nbcffmqdp().s[75]++;if((cov_1nbcffmqdp().b[18][0]++,doesCompanyExist!=undefined)&&(cov_1nbcffmqdp().b[18][1]++,doesUserExist!=undefined)){cov_1nbcffmqdp().b[17][0]++;cov_1nbcffmqdp().s[76]++;console.log('Valid User ID:'+userID+' and Company with name '+companyName);let companyPrice=(cov_1nbcffmqdp().s[77]++,await getFundByCompanyName(companyName));cov_1nbcffmqdp().s[78]++;console.log('Company Price'+companyPrice[0].Price);const user=(cov_1nbcffmqdp().s[79]++,await addUserFund(userID,companyPrice[0].Price));// Remove company from user List
let isSuccess=(cov_1nbcffmqdp().s[80]++,await deletCompanyFromUser(userID,companyName));cov_1nbcffmqdp().s[81]++;res.status(200).json({"Success":"Request has been processed","requestBody":req.body});}else{cov_1nbcffmqdp().b[17][1]++;}}}}else{cov_1nbcffmqdp().b[13][1]++;cov_1nbcffmqdp().s[82]++;res.status(400).json({"error":"Request has incorrect parameters","requestBody":req.body});}}else{cov_1nbcffmqdp().b[12][1]++;cov_1nbcffmqdp().s[83]++;res.status(400).json({"error":"Market is open during Mon-Fri ,9 AM -5 PM","requestBody":req.body});}});//Function to check if a user exits or not in DB 
function getUserByID(id){cov_1nbcffmqdp().f[4]++;cov_1nbcffmqdp().s[84]++;return db.getUserByID(id);}//Add Funds to User Balance
function addUserFund(ID,fund){cov_1nbcffmqdp().f[5]++;cov_1nbcffmqdp().s[85]++;return db.addUserFund(ID,fund);}//Deduct Funds from User Balance
function deductUserFund(ID,fund){cov_1nbcffmqdp().f[6]++;cov_1nbcffmqdp().s[86]++;return db.deductUserFund(ID,fund);}//Function to check if a company exits or not in DB 
function getCompanyByName(companyName){cov_1nbcffmqdp().f[7]++;cov_1nbcffmqdp().s[87]++;return db.getCompanyByID(companyName);}//Function to check if a user has the company to sell
function getUserCompanyByID(companyName){cov_1nbcffmqdp().f[8]++;cov_1nbcffmqdp().s[88]++;return db.getUserCompanyByID(companyName);}// Function to get fund of a company
function getFundByCompanyName(companyName){cov_1nbcffmqdp().f[9]++;cov_1nbcffmqdp().s[89]++;return db.getFundByCompanyName(companyName);}function addCompanyToUser(userID,companyName){cov_1nbcffmqdp().f[10]++;cov_1nbcffmqdp().s[90]++;return db.addCompanyToUser(userID,companyName);}function deletCompanyFromUser(userID,companyName){cov_1nbcffmqdp().f[11]++;cov_1nbcffmqdp().s[91]++;return db.deletCompanyFromUser(userID,companyName);}function checkTime(){cov_1nbcffmqdp().f[12]++;let currentDate=(cov_1nbcffmqdp().s[92]++,new Date());var currentDay=(cov_1nbcffmqdp().s[93]++,currentDate.getDay());var currentHour=(cov_1nbcffmqdp().s[94]++,currentDate.getHours());cov_1nbcffmqdp().s[95]++;console.log("is Week Day ? "+currentDay+" "+currentHour);var isValidDay=(cov_1nbcffmqdp().s[96]++,(cov_1nbcffmqdp().b[19][0]++,currentDay>2)||(cov_1nbcffmqdp().b[19][1]++,currentDay<6));// 6 = Saturday, 0 = Sunday
cov_1nbcffmqdp().s[97]++;console.log("is Week Day ? "+isValidDay);cov_1nbcffmqdp().s[98]++;isValidTime=(cov_1nbcffmqdp().b[20][0]++,currentHour>0)&&(cov_1nbcffmqdp().b[20][1]++,currentHour<17);cov_1nbcffmqdp().s[99]++;console.log("is 9-5 ? "+isValidTime);cov_1nbcffmqdp().s[100]++;return(cov_1nbcffmqdp().b[21][0]++,isValidTime)&&(cov_1nbcffmqdp().b[21][1]++,isValidDay);}cov_1nbcffmqdp().s[101]++;app.listen(port,()=>{cov_1nbcffmqdp().f[13]++;cov_1nbcffmqdp().s[102]++;console.log(`Example app listening at http://localhost:${port}`);});cov_1nbcffmqdp().s[103]++;module.exports=app;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNlcnZlci5qcyJdLCJuYW1lcyI6WyJleHByZXNzIiwicmVxdWlyZSIsImFwcCIsImJvZHlQYXJzZXIiLCJwb3J0IiwiZGIiLCJ1c2UiLCJ1cmxlbmNvZGVkIiwiZXh0ZW5kZWQiLCJqc29uIiwiZ2V0IiwicmVxIiwicmVzIiwiY29uc29sZSIsImxvZyIsInN0YXR1cyIsInNlbmQiLCJwb3N0IiwiYm9keSIsInVzZXJJRCIsImZ1bmQiLCJ1bmRlZmluZWQiLCJkb2VzVXNlckV4aXN0IiwiZ2V0VXNlckJ5SUQiLCJ1c2VyIiwiYWRkVXNlckZ1bmQiLCJjaGVja1RpbWUiLCJjb21wYW55TmFtZSIsImRvZXNDb21wYW55RXhpc3QiLCJnZXRDb21wYW55QnlOYW1lIiwidXNlckZ1bmQiLCJjb21wYW55UHJpY2UiLCJCYWxhbmNlIiwiUHJpY2UiLCJkZWR1Y3RVc2VyRnVuZCIsImlzU3VjY2VzcyIsImFkZENvbXBhbnlUb1VzZXIiLCJnZXRVc2VyQ29tcGFueUJ5SUQiLCJnZXRGdW5kQnlDb21wYW55TmFtZSIsImRlbGV0Q29tcGFueUZyb21Vc2VyIiwiaWQiLCJJRCIsImdldENvbXBhbnlCeUlEIiwiY3VycmVudERhdGUiLCJEYXRlIiwiY3VycmVudERheSIsImdldERheSIsImN1cnJlbnRIb3VyIiwiZ2V0SG91cnMiLCJpc1ZhbGlkRGF5IiwiaXNWYWxpZFRpbWUiLCJsaXN0ZW4iLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiNnpiQWVZOzJGQWZaLEtBQU1BLENBQUFBLE9BQU8sMEJBQUdDLE9BQU8sQ0FBQyxTQUFELENBQVYsQ0FBYixDQUNBLEtBQU1DLENBQUFBLEdBQUcsMEJBQUdGLE9BQU8sRUFBVixDQUFULENBQ0EsS0FBTUcsQ0FBQUEsVUFBVSwwQkFBR0YsT0FBTyxDQUFDLGFBQUQsQ0FBVixDQUFoQixDQUNBLEtBQU1HLENBQUFBLElBQUksMEJBQUcsSUFBSCxDQUFWLENBQ0EsS0FBTUMsQ0FBQUEsRUFBRSwwQkFBR0osT0FBTyxDQUFD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SUMsQ0FBQUEsV0FBVywyQkFBR0osV0FBVyxDQUFDSyxRQUFaLEVBQUgsQ0FBZixDQUhnQix5QkFJaEJuQyxPQUFPLENBQUNDLEdBQVIsQ0FBWSxpQkFBaUIrQixVQUFqQixDQUE4QixHQUE5QixDQUFrQ0UsV0FBOUMsRUFDQSxHQUFJRSxDQUFBQSxVQUFVLDJCQUFHLDZCQUFDSixVQUFVLENBQUUsQ0FBYixnQ0FBb0JBLFVBQVUsQ0FBRyxDQUFqQyxDQUFILENBQWQsQ0FBc0Q7QUFMdEMseUJBTWhCaEMsT0FBTyxDQUFDQyxHQUFSLENBQVksaUJBQWlCbUMsVUFBN0IsRUFOZ0IseUJBT2hCQyxXQUFXLENBQUUsNkJBQUFILFdBQVcsQ0FBQyxDQUFaLGdDQUFpQkEsV0FBVyxDQUFDLEVBQTdCLENBQWIsQ0FQZ0IseUJBUWhCbEMsT0FBTyxDQUFDQyxHQUFSLENBQVksWUFBWW9DLFdBQXhCLEVBUmdCLDBCQVNoQixNQUFRLDZCQUFBQSxXQUFXLGdDQUFJRCxVQUFKLENBQW5CLENBQ0gsQywwQkFFRC9DLEdBQUcsQ0FBQ2lELE1BQUosQ0FBVy9DLElBQVgsQ0FBaUIsSUFBTSxvREFDckJTLE9BQU8sQ0FBQ0MsR0FBUixDQUFhLDZDQUE0Q1YsSUFBSyxFQUE5RCxFQUNELENBRkQsRSwwQkFJQWdELE1BQU0sQ0FBQ0MsT0FBUCxDQUFlbkQsR0FBZiIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGV4cHJlc3MgPSByZXF1aXJlKCdleHByZXNzJylcclxuY29uc3QgYXBwID0gZXhwcmVzcygpO1xyXG5jb25zdCBib2R5UGFyc2VyID0gcmVxdWlyZSgnYm9keS1wYXJzZXInKTtcclxuY29uc3QgcG9ydCA9IDMwMTBcclxuY29uc3QgZGIgPSByZXF1aXJlKFwiLi9kYi9DUlVEb3BlcmF0aW9uc1wiKTtcclxuXHJcbmFwcC51c2UoYm9keVBhcnNlci51cmxlbmNvZGVkKHtleHRlbmRlZDpmYWxzZX0pKTtcclxuYXBwLnVzZShib2R5UGFyc2VyLmpzb24oKSk7XHJcblxyXG4vL0Jhc2UgVVJMIHRvIGNoZWNrIFNlcnZlciBTdGF0dXMgXHJcbmFwcC5nZXQoJy8nLCAocmVxLCByZXMpID0+IHtcclxuICAgIGNvbnNvbGUubG9nKGBCYXNlIFVSTCBIaXQgLSBTZXJ2ZXIgaXMgVVAgYW5kIFJ1bm5pbmcuYCk7XHJcbiAgICByZXMuc3RhdHVzKDIwMCkuc2VuZChcIlNlcnZlciBpcyBVUCBhbmQgUnVubmluZy5cIik7XHJcbn0pXHJcblxyXG4vL0Z1bmN0aW9uIHRvIGNoZWNrIDkgdG8gNSBXZWVrZGF5IFxyXG4vL0Z1bmN0aW9uYWxpdHkgdG8gQWRkIGZ1bmRzIFxyXG4vKiAxLlJlcXVlc3QgbXVzdCBoYXZlIFVzZXIgaWQgYW5kIHZhbGlkIEZ1bmQgdmFsdWUuXHJcbiAgIDIuRnVuZHMgY2FuJ3QgYmUgbmVnYXRpdmUuXHJcbiovXHJcbmFwcC5wb3N0KCcvYWRkRnVuZCcsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gICAgY29uc29sZS5sb2coJ1JlcXVlc3RlZCBVc2VyIElEID0nICsgcmVxLmJvZHkudXNlcklEKTtcclxuICAgIGNvbnNvbGUubG9nKCdSZXF1ZXN0ZWQgVXNlciBmdW5kID0gJyArIHJlcS5ib2R5LmZ1bmQpO1xyXG4gICAgbGV0IHVzZXJJRD1yZXEuYm9keS51c2VySUQ7XHJcbiAgICBsZXQgZnVuZD1yZXEuYm9keS5mdW5kO1xyXG4gICAgaWYgKHVzZXJJRCE9dW5kZWZpbmVkICYmIGZ1bmQhPXVuZGVmaW5lZCAgJiYgZnVuZCA+IDAgKXtcclxuICAgICAgIGNvbnNvbGUubG9nKCdWYWxpZCBSZXF1ZXN0IGFuZCBQYXJhbWV0ZXIsIENoZWNraW5nIHRoZSBVc2VyIElEIGluIERhdGFiYXNlLicpO1xyXG4gICAgICAgY29uc3QgZG9lc1VzZXJFeGlzdD1hd2FpdCBnZXRVc2VyQnlJRCh1c2VySUQpO1xyXG4gICAgICAgY29uc29sZS5sb2coZG9lc1VzZXJFeGlzdCk7XHJcbiAgICAgICAgaWYoZG9lc1VzZXJFeGlzdFswXSAhPXVuZGVmaW5lZCl7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdVcGRhdGluZyBVc2VyIHdpdGggVXNlciBJRDonICsgdXNlcklEICsgJyBBZGRpbmcgRnVuZHMgJyArIGZ1bmQpO1xyXG4gICAgICAgICAgICBjb25zdCB1c2VyPWF3YWl0IGFkZFVzZXJGdW5kKHVzZXJJRCxmdW5kKTtcclxuICAgICAgICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oe3VzZXJ9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDApLmpzb24oe1wiZXJyb3JcIjpcIk5vIFVzZXIgd2l0aCB0aGlzIFVzZXIgSURcIixcInJlcXVlc3RCb2R5XCI6IHJlcS5ib2R5fSk7ICBcclxuICAgICAgICB9XHJcbiAgICB9ZWxzZSBpZiAoZnVuZDwwKXtcclxuICAgICAgICByZXMuc3RhdHVzKDQwMCkuanNvbih7XCJlcnJvclwiOlwiRnVuZCB2YWx1ZSBjYW4gbm90IGJlIG5lZ2F0aXZlXCIsXCJyZXF1ZXN0Qm9keVwiOiByZXEuYm9keX0pOyAgXHJcbiAgICB9ZWxzZXtcclxuICAgICAgICByZXMuc3RhdHVzKDQwMCkuanNvbih7XCJlcnJvclwiOlwiUmVxdWVzdCBoYXMgaW5jb3JyZWN0IHBhcmFtZXRlcnNcIixcInJlcXVlc3RCb2R5XCI6IHJlcS5ib2R5fSk7ICBcclxuICAgIH1cclxuIH0pXHJcblxyXG4vL0FQSSB0byBCdXkgYSBjb21wYW55XHJcbi8qIDEuVmFsaWQgVXNlciBpZCBcclxuICAgMi5WYWxpZCBDb21wYW55IE5hbWVcclxuICAgMy5GdW5kcyBTaG91bGQgYmUgZW5vdWdoIGZvciBjb21wYW55ICovXHJcblxyXG5hcHAucG9zdCgnL2J1eUVxdWl0eScsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG5pZihjaGVja1RpbWUoKSl7XHJcbiAgICBjb25zb2xlLmxvZygnUmVxdWVzdGVkIFVzZXIgSUQgPSAnICsgcmVxLmJvZHkudXNlcklEKTtcclxuICAgIGNvbnNvbGUubG9nKCdSZXF1ZXN0ZWQgQ29tcGFueSBOYW1lID0gJyArIHJlcS5ib2R5LmNvbXBhbnlOYW1lKTtcclxuICAgIGxldCB1c2VySUQ9cmVxLmJvZHkudXNlcklEO1xyXG4gICAgbGV0IGNvbXBhbnlOYW1lPXJlcS5ib2R5LmNvbXBhbnlOYW1lO1xyXG4gICAgaWYgKHVzZXJJRCE9dW5kZWZpbmVkICYmIGNvbXBhbnlOYW1lIT11bmRlZmluZWQgKXtcclxuICAgICAgICAvLyBDaGVja2luZyBpZiBDb21wYW55IGFuZCBVc2VyIGV4aXN0IGluIGRhdGFiYXNlXHJcbiAgICAgICAgY29uc3QgZG9lc0NvbXBhbnlFeGlzdD1hd2FpdCBnZXRDb21wYW55QnlOYW1lKGNvbXBhbnlOYW1lKTtcclxuICAgICAgICBjb25zdCBkb2VzVXNlckV4aXN0PWF3YWl0IGdldFVzZXJCeUlEKHVzZXJJRCk7XHJcbiAgICAgICAgbGV0IHVzZXJGdW5kO1xyXG4gICAgICAgIGxldCBjb21wYW55UHJpY2U7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ0ZpbmRpbmcgVXNlciB3aXRoIFVzZXIgSUQ6JyArIHVzZXJJRCArICcgQWRkaW5nIENvbXBhbnkgJyArIGNvbXBhbnlOYW1lKTtcclxuICAgICAgICBpZihkb2VzQ29tcGFueUV4aXN0WzBdPT11bmRlZmluZWQpe1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnQ29tcGFueSBJRCBkb2VzIG5vdCBleGlzdCBpbiBEYXRhYmFzZScpO1xyXG4gICAgICAgICAgICByZXMuc3RhdHVzKDQwMCkuanNvbih7XCJlcnJvclwiOlwiTm8gQ29tcGFueSB3aXRoIHJlcXVlc3RlZCBJRFwiLFwicmVxdWVzdEJvZHlcIjogcmVxLmJvZHl9KTsgIFxyXG4gICAgICAgIH1lbHNlIGlmIChkb2VzVXNlckV4aXN0WzBdPT11bmRlZmluZWQgKXtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ05vIFVzZXIgd2l0aCB0aGlzIElEIGV4aXN0IGluIERhdGFiYXNlJyk7XHJcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcImVycm9yXCI6XCJObyBVc2VyIHdpdGggcmVxdWVzdGVkIElEXCIsXCJyZXF1ZXN0Qm9keVwiOiByZXEuYm9keX0pOyAgXHJcbiAgICAgICAgfWVsc2UgaWYgKGRvZXNDb21wYW55RXhpc3QhPXVuZGVmaW5lZCAmJiBkb2VzVXNlckV4aXN0IT11bmRlZmluZWQpe1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnVmFsaWQgVXNlciBJRDonICsgdXNlcklEICsgJyBhbmQgQ29tcGFueSB3aXRoIG5hbWUgJyArIGNvbXBhbnlOYW1lKTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ0NoZWNraW5nIFVzZXIgRnVuZCB3aXRoIFVzZXIgSUQ6JyArIGRvZXNVc2VyRXhpc3RbMF0uQmFsYW5jZSArICd3aXRoIENvbXBhbnkgUHJpY2UnICsgZG9lc0NvbXBhbnlFeGlzdFswXS5QcmljZSApO1xyXG4gICAgICAgICAgICB1c2VyRnVuZD1kb2VzVXNlckV4aXN0WzBdLkJhbGFuY2U7XHJcbiAgICAgICAgICAgIGNvbXBhbnlQcmljZT1kb2VzQ29tcGFueUV4aXN0WzBdLlByaWNlIDtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ0NoZWNraW5nIFVzZXIgRnVuZCBCeSBVc2VyaWQgPSAnKyB1c2VyRnVuZCArXCIsQ29tcGFueSBQcmljZSA9XCIrZG9lc0NvbXBhbnlFeGlzdFswXS5QcmljZSApO1xyXG4gICAgICAgICAgICBpZih1c2VyRnVuZDxjb21wYW55UHJpY2Upe1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1VzZXIgZnVuZCBpcyBsZXNzIHRoYW4gY29tcGFueSBQcmljZSAnKTtcclxuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcImVycm9yXCI6XCJVc2VyIGZ1bmQgaXMgbm90IGVub3VnaCBcIixcInJlcXVlc3RCb2R5XCI6IHJlcS5ib2R5fSk7ICBcclxuICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnVXNlciBoYXMgZW5vdWdoIGZ1bmQgdG8gYnV5IGVxdWl0eScpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdXNlcj1hd2FpdCBkZWR1Y3RVc2VyRnVuZCh1c2VySUQsY29tcGFueVByaWNlKTtcclxuICAgICAgICAgICAgICAgIC8vQWRkIGNvbXBuYXkgdG8gdXNlciBDb21wYW5pZXMuXHJcbiAgICAgICAgICAgICAgICBsZXQgaXNTdWNjZXNzID1hd2FpdCBhZGRDb21wYW55VG9Vc2VyKHVzZXJJRCxjb21wYW55TmFtZSk7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgQWRkZGluZyBjb21wYW55IHRvIHVzZXIgYCk7XHJcbiAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7XCJTdWNjZXNzXCI6XCJSZXF1ZXN0IGhhcyBiZWVuIHByb2Nlc3NlZFwiLFwicmVxdWVzdEJvZHlcIjogcmVxLmJvZHl9KTsgXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9ICAgICAgIFxyXG4gICAgfWVsc2V7XHJcbiAgICAgICAgcmVzLnN0YXR1cyg0MDApLmpzb24oe1wiZXJyb3JcIjpcIlJlcXVlc3QgaGFzIGluY29ycmVjdCBwYXJhbWV0ZXJzXCIsXCJyZXF1ZXN0Qm9keVwiOiByZXEuYm9keX0pOyAgXHJcbiAgICB9fVxyXG5lbHNle1xyXG4gICAgcmVzLnN0YXR1cyg0MDApLmpzb24oe1wiZXJyb3JcIjpcIk1hcmtldCBpcyBvcGVuIGR1cmluZyBNb24tRnJpICw5IEFNIC01IFBNXCIsXCJyZXF1ZXN0Qm9keVwiOiByZXEuYm9keX0pOyAgXHJcbiAgICB9XHJcbiAgfSkgXHJcblxyXG4vL0FQSSB0byBzZWxsIGEgY29tcGFueVxyXG4vKiAxLlZhbGlkIFVzZXIgaWQgXHJcbiAgIDIuVXNlciBTaG91bGQgaGF2ZSBDb21wYW55IHRvIHNlbGxcclxuKi9cclxuYXBwLnBvc3QoJy9zZWxsRXF1aXR5JywgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgICBpZihjaGVja1RpbWUoKSl7XHJcbiAgICBjb25zb2xlLmxvZygnUmVxdWVzdGVkIFVzZXIgSUQgPSAnICsgcmVxLmJvZHkudXNlcklEKTtcclxuICAgIGNvbnNvbGUubG9nKCdSZXF1ZXN0ZWQgQ29tcGFueSBOYW1lID0gJyArIHJlcS5ib2R5LmNvbXBhbnlOYW1lKTtcclxuICAgIGxldCB1c2VySUQ9cmVxLmJvZHkudXNlcklEO1xyXG4gICAgbGV0IGNvbXBhbnlOYW1lPXJlcS5ib2R5LmNvbXBhbnlOYW1lO1xyXG4gICAgaWYgKHVzZXJJRCE9dW5kZWZpbmVkICYmIGNvbXBhbnlOYW1lIT11bmRlZmluZWQgKXtcclxuICAgICAgICAgLy8gQ2hlY2tpbmcgaWYgQ29tcGFueSBhbmQgdXNlciBFeGlzdFxyXG4gICAgICAgICBjb25zdCBkb2VzQ29tcGFueUV4aXN0PWF3YWl0IGdldFVzZXJDb21wYW55QnlJRChjb21wYW55TmFtZSk7XHJcbiAgICAgICAgIGNvbnN0IGRvZXNVc2VyRXhpc3Q9YXdhaXQgZ2V0VXNlckJ5SUQodXNlcklEKTtcclxuICAgICAgICAgbGV0IHVzZXJGdW5kO1xyXG4gICAgICAgICBsZXQgY29tcGFueVByaWNlO1xyXG4gICAgICAgICBjb25zb2xlLmxvZygnRmluZGluZyBVc2VyIHdpdGggVXNlciBJRDonICsgdXNlcklEICsgJyBhbmQgQ29tcGFueSBieSBOYW1lICcgKyBjb21wYW55TmFtZSk7XHJcbiAgICAgICAgIGlmKGRvZXNVc2VyRXhpc3RbMF09PXVuZGVmaW5lZCl7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdObyBVc2VyIHdpdGggdGhpcyBJRCBleGlzdCBpbiBEYXRhYmFzZScpO1xyXG4gICAgICAgICAgICByZXMuc3RhdHVzKDQwMCkuanNvbih7XCJlcnJvclwiOlwiTm8gVXNlciB3aXRoIHJlcXVlc3RlZCBJRFwiLFwicmVxdWVzdEJvZHlcIjogcmVxLmJvZHl9KTsgIFxyXG4gICAgICAgIH1lbHNlIGlmIChkb2VzQ29tcGFueUV4aXN0WzBdPT11bmRlZmluZWQgKXtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ1VzZXIgZG9lc250IGhhdmUgdGhpcyBjb21wYW55IGluIGhpcyBsaXN0IHNvIGhlIGNhbnQgc2VsbCB0aGlzJyk7XHJcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcImVycm9yXCI6XCJObyBDb21wYW55IHdpdGggcmVxdWVzdGVkIElEXCIsXCJyZXF1ZXN0Qm9keVwiOiByZXEuYm9keX0pOyAgXHJcbiAgICAgICAgIH1lbHNlIGlmIChkb2VzQ29tcGFueUV4aXN0IT11bmRlZmluZWQgJiYgZG9lc1VzZXJFeGlzdCE9dW5kZWZpbmVkKXtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ1ZhbGlkIFVzZXIgSUQ6JyArIHVzZXJJRCArICcgYW5kIENvbXBhbnkgd2l0aCBuYW1lICcgKyBjb21wYW55TmFtZSk7IFxyXG4gICAgICAgICAgICBsZXQgY29tcGFueVByaWNlPWF3YWl0IGdldEZ1bmRCeUNvbXBhbnlOYW1lKGNvbXBhbnlOYW1lKTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ0NvbXBhbnkgUHJpY2UnK2NvbXBhbnlQcmljZVswXS5QcmljZSk7XHJcbiAgICAgICAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBhZGRVc2VyRnVuZCh1c2VySUQsY29tcGFueVByaWNlWzBdLlByaWNlKTtcclxuICAgICAgICAgICAgLy8gUmVtb3ZlIGNvbXBhbnkgZnJvbSB1c2VyIExpc3RcclxuICAgICAgICAgICAgbGV0IGlzU3VjY2Vzcz1hd2FpdCBkZWxldENvbXBhbnlGcm9tVXNlcih1c2VySUQsY29tcGFueU5hbWUpO1xyXG4gICAgICAgICAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7XCJTdWNjZXNzXCI6XCJSZXF1ZXN0IGhhcyBiZWVuIHByb2Nlc3NlZFwiLFwicmVxdWVzdEJvZHlcIjogcmVxLmJvZHl9KTsgIFxyXG4gICAgICAgICB9ICAgICAgIFxyXG4gICAgfWVsc2V7XHJcbiAgICAgICAgcmVzLnN0YXR1cyg0MDApLmpzb24oe1wiZXJyb3JcIjpcIlJlcXVlc3QgaGFzIGluY29ycmVjdCBwYXJhbWV0ZXJzXCIsXCJyZXF1ZXN0Qm9keVwiOiByZXEuYm9keX0pOyAgXHJcbiAgICB9XHJcbiAgICB9ZWxzZXtcclxuICAgICAgICByZXMuc3RhdHVzKDQwMCkuanNvbih7XCJlcnJvclwiOlwiTWFya2V0IGlzIG9wZW4gZHVyaW5nIE1vbi1GcmkgLDkgQU0gLTUgUE1cIixcInJlcXVlc3RCb2R5XCI6IHJlcS5ib2R5fSk7ICBcclxufVxyXG4gIH0pIFxyXG5cclxuLy9GdW5jdGlvbiB0byBjaGVjayBpZiBhIHVzZXIgZXhpdHMgb3Igbm90IGluIERCIFxyXG5mdW5jdGlvbiBnZXRVc2VyQnlJRChpZCl7XHJcbiAgICByZXR1cm4gZGIuZ2V0VXNlckJ5SUQoaWQpO1xyXG59XHJcblxyXG4vL0FkZCBGdW5kcyB0byBVc2VyIEJhbGFuY2VcclxuZnVuY3Rpb24gYWRkVXNlckZ1bmQoSUQsZnVuZCl7XHJcbiAgICByZXR1cm4gZGIuYWRkVXNlckZ1bmQoSUQsZnVuZCk7XHJcbn1cclxuXHJcbi8vRGVkdWN0IEZ1bmRzIGZyb20gVXNlciBCYWxhbmNlXHJcbmZ1bmN0aW9uIGRlZHVjdFVzZXJGdW5kKElELGZ1bmQpe1xyXG4gICAgcmV0dXJuIGRiLmRlZHVjdFVzZXJGdW5kKElELGZ1bmQpO1xyXG59XHJcblxyXG4vL0Z1bmN0aW9uIHRvIGNoZWNrIGlmIGEgY29tcGFueSBleGl0cyBvciBub3QgaW4gREIgXHJcbmZ1bmN0aW9uIGdldENvbXBhbnlCeU5hbWUoY29tcGFueU5hbWUpe1xyXG4gICAgcmV0dXJuIGRiLmdldENvbXBhbnlCeUlEKGNvbXBhbnlOYW1lKTtcclxufVxyXG5cclxuLy9GdW5jdGlvbiB0byBjaGVjayBpZiBhIHVzZXIgaGFzIHRoZSBjb21wYW55IHRvIHNlbGxcclxuZnVuY3Rpb24gZ2V0VXNlckNvbXBhbnlCeUlEKGNvbXBhbnlOYW1lKXtcclxuICAgIHJldHVybiBkYi5nZXRVc2VyQ29tcGFueUJ5SUQoY29tcGFueU5hbWUpO1xyXG59XHJcblxyXG4vLyBGdW5jdGlvbiB0byBnZXQgZnVuZCBvZiBhIGNvbXBhbnlcclxuZnVuY3Rpb24gZ2V0RnVuZEJ5Q29tcGFueU5hbWUoY29tcGFueU5hbWUpe1xyXG4gICAgcmV0dXJuIGRiLmdldEZ1bmRCeUNvbXBhbnlOYW1lKGNvbXBhbnlOYW1lKTtcclxufVxyXG5cclxuZnVuY3Rpb24gYWRkQ29tcGFueVRvVXNlcih1c2VySUQsY29tcGFueU5hbWUpe1xyXG4gICAgcmV0dXJuIGRiLmFkZENvbXBhbnlUb1VzZXIodXNlcklELGNvbXBhbnlOYW1lKTtcclxufVxyXG5cclxuZnVuY3Rpb24gZGVsZXRDb21wYW55RnJvbVVzZXIodXNlcklELGNvbXBhbnlOYW1lKXtcclxuICAgIHJldHVybiBkYi5kZWxldENvbXBhbnlGcm9tVXNlcih1c2VySUQsY29tcGFueU5hbWUpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjaGVja1RpbWUoKXtcclxuICAgIGxldCBjdXJyZW50RGF0ZT1uZXcgRGF0ZSgpO1xyXG4gICAgdmFyIGN1cnJlbnREYXkgPSBjdXJyZW50RGF0ZS5nZXREYXkoKTtcclxuICAgIHZhciBjdXJyZW50SG91ciA9IGN1cnJlbnREYXRlLmdldEhvdXJzKCk7XHJcbiAgICBjb25zb2xlLmxvZyhcImlzIFdlZWsgRGF5ID8gXCIrY3VycmVudERheSArIFwiIFwiK2N1cnJlbnRIb3VyKVxyXG4gICAgdmFyIGlzVmFsaWREYXkgPSAoY3VycmVudERheSA+MikgfHwgKGN1cnJlbnREYXkgIDw2KTsgLy8gNiA9IFNhdHVyZGF5LCAwID0gU3VuZGF5XHJcbiAgICBjb25zb2xlLmxvZyhcImlzIFdlZWsgRGF5ID8gXCIraXNWYWxpZERheSlcclxuICAgIGlzVmFsaWRUaW1lPSBjdXJyZW50SG91cj4wICYmIGN1cnJlbnRIb3VyPDE3IDtcclxuICAgIGNvbnNvbGUubG9nKFwiaXMgOS01ID8gXCIraXNWYWxpZFRpbWUpXHJcbiAgICByZXR1cm4gKGlzVmFsaWRUaW1lICYmIGlzVmFsaWREYXkgKTtcclxufVxyXG5cclxuYXBwLmxpc3Rlbihwb3J0LCAoKSA9PiB7XHJcbiAgY29uc29sZS5sb2coYEV4YW1wbGUgYXBwIGxpc3RlbmluZyBhdCBodHRwOi8vbG9jYWxob3N0OiR7cG9ydH1gKVxyXG59KVxyXG5cclxubW9kdWxlLmV4cG9ydHM9YXBwOyJdfQ==